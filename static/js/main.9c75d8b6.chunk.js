(this.webpackJsonppbbdtm=this.webpackJsonppbbdtm||[]).push([[0],{11:function(e,t,a){e.exports={card:"Login_card__1aHd1",body:"Login_body__2QrV6"}},225:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(35),l=a.n(n),i=(a(90),a(4)),r=a(6),o=(a(91),a(2)),d=a.n(o),j=a(36),b=a.n(j),m=a(5),u=a.n(m),h=a(13),p=a.n(h);function O(e,t){return e?t:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""}function x(e){const t=e.split("");return t[0]=t[0].toUpperCase(),t.join("")}function f(e){return e.split(" ").map((e=>"Id"===e?"ID":x(e))).join(" ")}function g(e){if(e.response){const t=e.response;t.data.message&&422!==t.status?d.a.error(t.data.message):422===t.status?Object.values(t.data.errors).forEach((e=>e.forEach((e=>d.a.error(e))))):e.message?d.a.error(e.message):d.a.error("Something went wrong, please try again later.","Oops!")}else e.message&&d.a.error(e.message)}function v(e){return 0===e.length?[]:Object.keys(e[0]).map((e=>{switch(e){case"id":return"ID";case"createdAt":case"created_at":return"Date Requested";case"updatedAt":case"updated_at":return"Date Modified";default:return N(e)}}))}function N(e){return f(b.a.snakeCase(e).split("_").join(" "))}function y(e,t){const a={...e};for(const s of t)s in a&&delete a[s];return a}function w(e,t){return[...e].map((e=>y(e,t)))}function k(e,t){return t.includes(e)}u.a.extend(p.a);new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});const S={ROOT:"/",LOGIN:"/login",REGISTER:"/register",DASHBOARD:"/dashboard",DOCUMENT_TYPES:"/document-types",USERS:"/users",REQUESTS:{ROOT:"/requests",ARCHIVED:"/archived",INACTIVE:"/inactive"},PROFILE:"/profile",DOWNLOADABLES:"/downloadables",CMS:"/content-management",CONTACTS:"/contacts",TRACK_REQUEST:"/track-request",FORGOT_PASSWORD:"/forgot-password",RESET_PASSWORD:"/reset-password"};class R{constructor(e){this.storage=void 0,this.key="pbbdtm-state-key",this.listeners={},this.storage=window.localStorage,e&&(this.key=e);const t=this.getAll();this.setAll(t)}clear(){return this.setAll({})}getAll(){try{const e=this.storage.getItem(this.key);if(!e)return{};const t=JSON.parse(e);return"object"!==typeof t?{}:t}catch(e){return{}}}setAll(e){return this.storage.setItem(this.key,JSON.stringify(e)),this}has(e){return e in this.getAll()}get(e){return this.getAll()[e]}set(e,t){const a=this.getAll();return a[e]=t,this.dispatch(e,t),this.setAll(a)}remove(e){if(this.has(e)){const t=this.getAll();delete t[e],this.setAll(t)}return this}dispatch(e,t){return e in this.listeners&&this.listeners[e].forEach((e=>e(t,this))),this}listen(e,t){return e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)-1}unlisten(e,t){e in this.listeners&&this.listeners[e].splice(t,1)}}var D=new R,C=a(47),E=a.n(C),A=a(80),_=a.n(A),q=a(0);function T(e){let{title:t,data:a,onViewClick:c,onEditClick:n,onDeleteConfirm:l,onRefreshClick:i,processing:r,onAddClick:o,withAction:d,pagination:j,border:m,dontShowView:u,dontShowEdit:h,dontShowDelete:p,disableAddButton:x,id:f}=e;const g=new R(b.a.kebabCase(t.toLowerCase()+"-table")),v=a.length,y=g.has("page")?g.get("page"):1,[w,k]=Object(s.useState)(g.has("perPage")?g.get("perPage"):10);y>Math.ceil(v/w)&&g.has("page")&&g.set("page",1);const[S,D]=Object(s.useState)(y<=Math.ceil(v/w)?y:1),C=g.listen("page",(e=>D(e))),[A,T]=Object(s.useState)(w),[M,P]=Object(s.useState)(!1),U=g.listen("perPage",(e=>{S>Math.ceil(v/e)&&g.set("page",1),k(e)}));Object(s.useEffect)((()=>()=>{g.unlisten("page",C),g.unlisten("perPage",U)}),[]);const F=(S-1)*w,I=[];for(let s=F;s<F+w;s++)"undefined"!==typeof a[s]&&I.push(a[s]);const B=a.length>0?Object.keys(a[0]).map((e=>({name:N(e),selector:t=>t[e],sortable:!0,minWidth:"200px"}))):[];return d&&B.push({name:"Actions",selector:e=>e.action,sortable:!0,minWidth:"300px"}),Object(q.jsx)("div",{className:"row",id:f,children:Object(q.jsx)("div",{className:"col-12",children:Object(q.jsxs)("div",{className:"card ".concat(m?"border":""," w-100"),children:[Object(q.jsxs)("div",{className:"card-header border-0",children:[Object(q.jsxs)("div",{className:"d-flex",children:[Object(q.jsx)("h3",{className:"mb-0 align-self-center",children:t}),Object(q.jsxs)("div",{className:"ml-auto align-self-center d-flex",children:[!d||void 0!==x&&!1!==x?null:Object(q.jsx)("i",{className:"fas fa-plus clickable d-block align-self-center m-1 text-warning",onClick:()=>o()}),d?Object(q.jsx)("i",{className:"fas fa-redo-alt clickable d-block align-self-center m-1 text-info ".concat(r?"fa-spin":""),onClick:()=>i()}):null]})]}),j?Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("div",{className:"py-2",children:Object(q.jsxs)("button",{className:"btn btn-".concat(M?"danger":"primary"," btn-sm d-none"),onClick:e=>{e.preventDefault(),P(!M)},children:[M?"Hide":"Show"," Options"]})}),M?Object(q.jsxs)("form",{className:"form-inline d-none",onSubmit:e=>{e.preventDefault(),g.set("perPage",A>=1?A:10)},children:[Object(q.jsxs)("div",{className:"form-group p-1",children:[Object(q.jsx)("label",{htmlFor:"perPage",className:"mr-2",children:"Rows per Page:"}),Object(q.jsx)("input",{type:"number",name:"perPage",id:"perPage",placeholder:"Per Page",value:A,onChange:e=>T(Number(e.target.value)),className:"form-control form-control-sm"})]}),Object(q.jsx)("div",{className:"form-group p-1",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-warning btn-sm",children:"Change"})})]}):null]}):null]}),r?Object(q.jsx)("div",{className:"card-body",children:Object(q.jsx)("div",{className:"text-center",children:Object(q.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})}):Object(q.jsxs)("div",{className:"card-body",children:[a.length>0?Object(q.jsx)("div",{className:"table-responsive",style:{overflowY:"hidden"},children:Object(q.jsx)(_.a,{columns:B,data:a.map(((e,t)=>({...e,action:Object(q.jsxs)("div",{className:"d-flex w-100 ".concat(d?"":"d-none"),children:[O(void 0===u||!1===u,Object(q.jsxs)("button",{className:"mx-1 btn btn-link",onClick:()=>c(e),children:[Object(q.jsx)("i",{className:"ni ni-active-40 text-info"}),"View"]})),O(void 0===h||!1===h,Object(q.jsxs)("button",{className:"mx-1 btn btn-link",onClick:()=>n(e),children:[Object(q.jsx)("i",{className:"ni ni-ruler-pencil text-warning"}),"Edit"]})),O(void 0===p||!1===p,Object(q.jsxs)("button",{type:"button","data-toggle":"modal","data-target":"#deleteModal".concat(t),className:"mx-1 btn btn-link",children:[Object(q.jsx)("i",{className:"ni ni-fat-delete text-danger"}),"Delete"]}))]})}))),pagination:!0,theme:"default"})}):null,0===a.length?Object(q.jsx)("div",{className:"card-body",children:Object(q.jsx)("h3",{className:"text-center",children:"No Data"})}):null]}),d?a.map(((e,a)=>Object(q.jsx)("div",{className:"modal fade",id:"deleteModal".concat(a),tabIndex:-1,role:"dialog","aria-labelledby":"deleteModalLabel".concat(a),"aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsxs)("h5",{className:"modal-title",id:"deleteModalLabel".concat(a),children:["Delete ",E.a.singular(t)]}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete this ",E.a.singular(t),"?"]}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:t=>{t.preventDefault();const s=$("#deleteModal".concat(a));s.on("hidden.bs.modal",(()=>l(e))),s.modal("hide")},children:"Confirm"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})},a))):null]})})})}var M=a(3),P=a.n(M);function U(e){const[t,a]=Object(s.useState)(!1),[c,n]=Object(s.useState)(""),l=Object(r.f)(),i=D.get("user");return Object(q.jsx)("div",{className:"card shadow ".concat(e.className),children:Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("form",{className:"form-inline",onSubmit:e=>{e.preventDefault(),(async()=>{a(!0);try{const{data:e}=await P.a.get("/requests"),t=e.find((e=>e.request_id.includes(c)||e.request_id===c));if(t&&(!D.has("logged")||!D.get("logged")||void 0===D.get("user")))return l.push("".concat(S.TRACK_REQUEST,"/").concat(t.id));if(!t||"Applicant"===i.role&&t.user_id!==i.id)return d.a.info("Request ID is invalid.","Notice");l.push("/dashboard/requests/".concat(t.id))}catch(e){console.log(e.toJSON()),d.a.error("Unable to verify request ID.","Oops!")}finally{a(!1)}})()},children:[Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"text",placeholder:"Request ID",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:c,onChange:e=>{n(e.target.value.trim())}})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-warning ".concat(O(t,"disabled")),disabled:t,children:t?"Processing":"Track Request"})})]})})})}var F=()=>{const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!1),n=Object(r.h)(),l=Object(r.f)(),[i,o]=Object(s.useState)([]),[j,b]=Object(s.useState)(),[m,h]=Object(s.useState)([]),[p,O]=Object(s.useState)([]),[f,N]=Object(s.useState)(null),y=e=>"".concat(n.path).concat(e),k=n.path.includes(S.REQUESTS.INACTIVE)||n.path.includes(S.REQUESTS.ARCHIVED),R=async()=>{c(!0);try{const{data:e}=await P.a.get("/requests");h(e);const a=E(e);if(n.path.includes(S.REQUESTS.INACTIVE)){const e=a.filter((e=>e.expired)).map((e=>({...e,continue:Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:t=>{t.preventDefault(),(async e=>{try{await P.a.put("/requests?id=".concat(e.id),{expired:!1}),d.a.success("Request updated successfully."),await R()}catch(t){g(t)}})(e)},children:"Continue"})})));return t(w(e,["file","file_id","user_id","document_type_id","tasks","status","acknowledged","expired","files","for","evaluation","acknowledged_dates","acknowledged"]))}if(n.path.includes(S.REQUESTS.ARCHIVED))return t(w(a,["file","file_id","user_id","document_type_id","tasks","status","acknowledged","expired","files","for","evaluation","acknowledged_dates"]).filter((e=>e.approved)));t(w(a,["file","file_id","user_id","document_type_id","tasks","files","for","acknowledged_dates"]))}catch(e){console.log(e.toJSON()),d.a.error("Unable to fetch requests.")}finally{c(!1)}},C=D.get("user"),E=e=>{switch(C.role){case"Admin":case"Director":case"Registrar":return e;case"Cashier":return e.filter((e=>"Payment"===e.status));case"Evaluation":return e.filter((e=>"Evaluating"===e.status));case"Releasing":return e.filter((e=>"Signed"===e.status||"Releasing"===e.status));case"Applicant":return e.filter((e=>e.user_id===C.id))}},A=e=>(e=>{switch(e.status){case"Received":return"Admin"===C.role;case"Payment":return"Cashier"===C.role;case"Evaluating":return"Evaluation"===C.role;case"Evaluated":const t=m.find((t=>t.id===e.id));return(null===t||void 0===t?void 0:t.for)===C.role;case"Signed":return"Releasing"===C.role;default:return!1}})(e)?e.acknowledged?Object(q.jsx)("button",{className:"btn btn-warning btn-sm disabled",disabled:!0,children:"Done"}):Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:async t=>{t.preventDefault(),t.currentTarget.setAttribute("disabled","true"),t.currentTarget.classList.add("disabled"),t.currentTarget.textContent="Acknowledging...";try{const{data:t}=await P.a.get("/requests/show?id=".concat(e.id)),a=Array.from(JSON.parse(t.acknowledged_dates));a.push({date:(new Date).toJSON(),status:t.status}),"Releasing"===C.role&&a.push({date:(new Date).toJSON(),status:"Releasing"}),await P.a.put("/requests?id=".concat(t.id),{acknowledged:!0,acknowledged_dates:JSON.stringify(a)}),d.a.info("Request acknowledged.","Notice"),await R()}catch(a){console.log(a.toJSON(),e),d.a.error("Unable to acknowledge request.")}},children:"Acknowledge"}):e.acknowledged?Object(q.jsx)("span",{className:"badge badge-green",children:"Yes"}):Object(q.jsx)("span",{className:"badge badge-red",children:"No"});return Object(s.useEffect)((()=>{R(),(async()=>{try{const e=await P.a.get("/document-types");o(e.data);const t=[];e.data.map((e=>e.type)).forEach((e=>{t.includes(e)||t.push(e)})),O(t),c(!1)}catch(e){console.log(e.toJSON())}})()}),[]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(U,{}),Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12 col-md-6",children:Object(q.jsx)("div",{className:"container-fluid",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12 col-md-6",children:Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"filter",children:"Document"}),Object(q.jsxs)("select",{className:"form-control form-control-sm",onChange:e=>{const{value:t}=e.target;if("All"===t)b(null);else{const e=t.parseNumbers();i.find((t=>t.id===e))&&b(e)}},value:j||"All",children:[Object(q.jsx)("option",{value:"All",children:"All"}),i.map(((e,t)=>Object(q.jsx)("option",{value:e.id,children:e.name},t)))]})]})}),Object(q.jsx)("div",{className:"col-12 col-md-6",children:Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"Type"}),Object(q.jsxs)("select",{className:"form-control form-control-sm",onChange:e=>{const{value:t}=e.target;if("All"===t)N(null);else{const e=i.find((e=>e.type===t));e&&N(e.type)}},value:f||"All",children:[Object(q.jsx)("option",{value:"All",children:"All"}),p.map(((e,t)=>Object(q.jsx)("option",{value:e,children:e},t)))]})]})})]})})}),Object(q.jsx)("div",{className:"col-12 col-md-6 d-flex align-items-center",children:Object(q.jsx)("button",{className:"btn btn-secondary btn-sm ml-auto",onClick:t=>{t.preventDefault(),(async()=>{d.a.info("Printing. Please wait.");const t=w(e,["updated_at","created_at","approved","acknowledged","evaluation","rejected","expired","status","id"]),a="\n            <div class='table-responsive' style='overflow: hidden'>\n                <table class='table table-sm' style='overflow: hidden'>\n                    <thead>\n                        <tr>\n                            ".concat(v(t).map((e=>"<th>".concat(e,"</th>"))).join(""),"\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ").concat(t.filter((e=>{var t;return!j||(null===(t=e.documentType)||void 0===t?void 0:t.id)===j})).filter((e=>{var t;return!f||(null===(t=e.documentType)||void 0===t?void 0:t.type)===f})).map((e=>({...e,user:e.user.name,type:e.documentType.type,documentType:e.documentType.name}))).map((e=>n.path.includes(S.REQUESTS.ARCHIVED)||n.path.includes(S.REQUESTS.INACTIVE)?e:{...e})).map((e=>"\n                                <tr>\n                                    ".concat(Object.keys(e).map((t=>"<td>".concat(e[t],"</td>"))).join(""),"\n                                </tr>"))).join(""),"\n                    </tbody>\n                </table>\n            </div>\n        "),s=$("#iframe")[0],c=["https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css","https://fonts.googleapis.com/css?family=Montserrat:400,700,200",origin+"/assets/css/bootstrap.min.css",origin+"/assets/css/paper-dashboard.css",origin+"/assets/demo/demo.css"],l=s.contentWindow;if(null===l||void 0===l||l.document.open(),l&&l.document){l.document.write("<head>");const e=await Promise.all(c.map((async e=>{try{const{data:t}=await P.a.get(e,{timeout:5e3});return"<style>".concat(t,"</style>")}catch(t){return'<link href="'.concat(e,'" rel="stylesheet" />')}}))),t=Array.from(document.querySelectorAll("style")).map((e=>"<style>".concat(e.innerHTML,"</style>")));e.forEach((e=>{l.document.write(e)})),t.forEach((e=>{l.document.write(e)})),l.document.write("</head>"),l.document.write("<body>"),l.document.write(a),l.document.write("</body>"),l.document.close(),l.focus(),setTimeout((()=>{l.print()}),500)}})()},children:"Print"})})]}),Object(q.jsx)(T,{id:"request-table",title:(()=>{if(!k)return"Requests";const e=n.path.split("/");return"".concat(x(e[e.length-1])," Requests")})(),columns:v(e),data:e.filter((e=>{var t;return!j||(null===(t=e.documentType)||void 0===t?void 0:t.id)===j})).filter((e=>{var t;return!f||(null===(t=e.documentType)||void 0===t?void 0:t.type)===f})).map((e=>({...e,created_at:u()(e.created_at).format("MMMM DD, YYYY hh:mm A"),updated_at:u()(e.updated_at).format("MMMM DD, YYYY hh:mm A"),user:e.user.name,type:e.documentType.type,documentType:e.documentType.name,approved:e.approved?Object(q.jsx)("span",{className:"badge badge-green",children:"Yes"}):Object(q.jsx)("span",{className:"badge badge-red",children:"No"}),acknowledged:n.path.includes(S.REQUESTS.ARCHIVED)||n.path.includes(S.REQUESTS.INACTIVE)?"":A(e),evaluation:e.evaluation?e.evaluation:"",rejected:e.rejected?Object(q.jsx)("span",{className:"badge badge-danger",children:"Yes"}):Object(q.jsx)("span",{className:"badge badge-success",children:"No"})}))).map((e=>n.path.includes(S.REQUESTS.ARCHIVED)||n.path.includes(S.REQUESTS.INACTIVE)?e:{...e,expired:e.expired?Object(q.jsx)("span",{className:"badge badge-red",children:"Yes"}):Object(q.jsx)("span",{className:"badge badge-green",children:"No"}),status:e.acknowledged?Object(q.jsx)("span",{className:"badge badge-green",children:e.status}):Object(q.jsx)("span",{className:"badge badge-danger",children:"Pending"})})),processing:a,onAddClick:()=>l.push(y("add")),onViewClick:e=>{let{id:t}=e;l.push(y("".concat(t)))},onEditClick:e=>{let{id:t}=e;l.push(y("".concat(t,"/edit")))},onDeleteConfirm:e=>{let{id:t}=e;(async e=>{c(!0);try{await P.a.delete("/requests?id=".concat(e)),d.a.success("Request deleted successfully."),await R()}catch(t){console.log(t.toJSON()),g(t),c(!1)}})(t)},onRefreshClick:R,withAction:!k,pagination:!0,dontShowView:"Applicant"===C.role||k,dontShowDelete:"Applicant"===C.role||k,disableAddButton:"Applicant"!==C.role||k}),Object(q.jsx)("iframe",{className:"d-none",title:"iframe",id:"iframe"})]})};var I=e=>Object(q.jsx)(F,{});const B=["Received","Payment","Evaluating","Evaluated","Signed","Releasing","Released"];function L(){var e,t,a,c;const[n,l]=Object(s.useState)(!1),i=D.get("user"),[o,j]=Object(s.useState)({document_type_id:-1,approved:!1,status:"Received",user_id:i.id,file_id:null,user:{name:"Applicant"===i.role?i.name:"N\\A"},documentType:{name:"N\\A"},acknowledged_dates:JSON.stringify([])}),[b,m]=Object(s.useState)(null),u=Object(s.createRef)(),h=Object(r.f)(),{params:p,path:x}=Object(r.h)();Object(s.useEffect)((()=>{x.includes("edit")&&(async()=>{const e=p.id;try{const t=await P.a.get("/requests/show?id=".concat(e));j({...t.data,file:null})}catch(t){console.log(t.toJSON()),d.a.error("Unable to fetch request."),h.goBack()}})()}),[]);const f=(()=>{switch(i.role){case"Admin":case"Registrar":case"Director":return["Received","Payment","Evaluating","Evaluated","Signed","Releasing","Released"];case"Cashier":return["Payment","Evaluating"];case"Evaluation":return["Signed","Released"];case"Releasing":return["Releasing","Released"];default:return[]}})();return Object(q.jsxs)("form",{className:"container",onSubmit:async e=>{e.preventDefault(),await(async()=>{if(!n){l(!0);try{const e=new FormData;e.append("_method","PUT"),b&&(o.file=b);for(const t of["documentType","logs","files","tasks","user","evaluation","expired"])delete o[t];for(const t in o){const a=o[t];e.append(t,a)}await P.a.post("/requests",e),d.a.success("Request updated successfully."),m(null)}catch(e){g(e)}finally{l(!1)}}})()},children:[Object(q.jsxs)("div",{className:"d-flex",children:[Object(q.jsx)("h3",{className:"align-self-center mb-0",children:"Update Request"}),Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:e=>{e.preventDefault(),h.goBack()},children:"Back"})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"document_type_id",children:"Document Type"}),Object(q.jsx)("select",{name:"document_type_id",id:"document_type_id",className:"form-control form-control-sm",disabled:"Applicant"!==i.role,children:Object(q.jsx)("option",{value:null===(e=o.documentType)||void 0===e?void 0:e.name,children:null===(t=o.documentType)||void 0===t?void 0:t.name})})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"user_id",children:"User"}),Object(q.jsx)("select",{name:"user_id",id:"user_id",placeholder:"User",className:"form-control form-control-sm",disabled:"Applicant"!==i.role,children:Object(q.jsx)("option",{value:null===(a=o.user)||void 0===a?void 0:a.name,children:null===(c=o.user)||void 0===c?void 0:c.name})})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"status",children:"Status"}),Object(q.jsxs)("select",{name:"status",id:"status",placeholder:"Status",className:"form-control form-control-sm ".concat(O(n,"disabled")),disabled:n,onChange:e=>{const{id:t,value:a}=e.target;j({...o,[t]:a})},value:o.status,children:[Object(q.jsx)("option",{value:"",children:" -- Select -- "}),B.filter((e=>f.includes(e))).map(((e,t)=>Object(q.jsx)("option",{value:e,children:e},t)))]})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"approved",children:"Approved"}),Object(q.jsxs)("select",{name:"approved",id:"approved",placeholder:"Approved",className:"form-control form-control-sm ".concat(O(n,"disabled")),disabled:n||"Admin"!==i.role&&"Releasing"!==i.role,value:o.approved?"Yes":"No",onChange:e=>{"Admin"!==i.role&&"Releasing"!==i.role||("Yes"===e.target.value?j({...o,approved:!0}):j({...o,approved:!1}))},children:[Object(q.jsx)("option",{value:"Yes",children:"Yes"}),Object(q.jsx)("option",{value:"No",children:"No"})]})]}),o.approved?Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("button",{className:"btn btn-warning btn-sm ".concat(O(n||null!==b,"disabled")),disabled:n||"Admin"!==i.role&&"Releasing"!==i.role||null!==b,onClick:e=>{var t;e.preventDefault(),null===(t=u.current)||void 0===t||t.click()},children:null!==b?"File Uploaded":"Upload File (if applicable)"}),Object(q.jsx)("input",{type:"file",id:"file",name:"file",placeholder:"File",className:"form-control form-control-sm d-none",disabled:n||"Admin"!==i.role&&"Releasing"!==i.role||null!==b,onChange:e=>{("Admin"===i.role||"Releasing"===i.role)&&e.target.files&&e.target.files.length>0&&m(e.target.files[0])},ref:u})]}):null,Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(O(n,"disabled")),disabled:n,children:n?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}var Y=e=>Object(q.jsx)(F,{});function J(){return Object(q.jsx)(F,{})}a(119);var H=a(84),V=a.n(H);var Q=e=>{let{onChange:t,value:a}=e;return Object(q.jsx)(V.a,{onChange:t,value:a})};function G(){var e,t,a;const[c,n]=Object(s.useState)(null),l=Object(r.f)(),[i,o]=Object(s.useState)(!1),[j,b]=Object(s.useState)(""),[m,h]=Object(s.useState)(""),[p,x]=Object(s.useState)(""),[f,v]=Object(s.useState)("Request has been rejected"),[N,y]=Object(s.useState)("Request has been rejected"),[w,k]=Object(s.useState)(""),[S,R]=Object(s.useState)(""),C=Object(s.createRef)(),E=D.get("user"),A=async e=>{try{var t,a;const{data:s}=await P.a.get("/requests/show?id=".concat(e));return n(s),h("Your Request (ID: ".concat(s.request_id,") has been updated to ").concat(F(E.role),". ").concat(window.location.origin,"/dashboard/requests/").concat(s.id)),x("\n                <div>\n                    <p>Hi ".concat(null===(t=s.user)||void 0===t?void 0:t.name,"!</p>\n                    <p>Your request (ID: ").concat(s.request_id,") is updated to: <b>").concat(F(E.role),"</b></p>\n                    <p>Last Updater: ").concat(E.name,"</p>\n                    <p>Date Updated: ").concat(u()().format("MMMM DD, YYYY"),"</p>\n                </div>\n            ")),k("Your Request (ID: ".concat(s.request_id,") has been released. ").concat(window.location.origin,"/dashboard/requests/").concat(s.id)),R("\n                <div>\n                    <p>Hi ".concat(null===(a=s.user)||void 0===a?void 0:a.name,"!</p>\n                    <p>Your request (ID: ").concat(s.request_id,") is updated released.</b></p>\n                    <p>Last Updater: ").concat(E.name,"</p>\n                    <p>Date Released: ").concat(u()().format("MMMM DD, YYYY"),"</p>\n                </div>\n            ")),s}catch(s){g(s),l.goBack()}},_=async(e,t)=>{try{await P.a.put("/requests/tasks",{...e,done:t,name:E.name}),d.a.info("Task updated.","Notice"),A("".concat(null===c||void 0===c?void 0:c.id))}catch(a){console.log(a.toJSON()),d.a.error("Unable to update task.","Oops!")}};let T=!1;const{params:M}=Object(r.h)();Object(s.useEffect)((()=>{A(M.id)}),[]);const U=(e=>{switch(e){case"Admin":return"Forward for payment to Cashier";case"Cashier":return"Mark as paid and forward to Evaluation";case"Evaluation":return"Forward to Signing";case"Director":return"Mark as ready for releasing and forward to Releasing";case"Registrar":return"Mark as ready for releasing and forward to Director or Releasing";case"Releasing":return"Notify client for document release";default:return""}})(E.role),F=e=>{switch(e){case"Admin":return"Payment";case"Cashier":return"Evaluating";case"Evaluation":return"Evaluated";case"Director":case"Registrar":return"Signed";case"Releasing":return"Releasing";default:throw new Error("Invalid role. ".concat(e))}},I=window.location.origin,L=e=>Array.from(JSON.parse((null===c||void 0===c?void 0:c.acknowledged_dates)||"[]")).find((t=>t.status===e)),Y=e=>{if(e.tasks&&0===e.tasks.length)return!0;if(!e.tasks)return!0;for(const t of e.tasks)if(t.for===e.status&&!t.done)return!1;return!0};return Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("h3",{className:"mb-0",children:"View Request"})}),Object(q.jsxs)("div",{className:"col-12 d-flex",children:[Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:e=>{e.preventDefault(),l.goBack()},children:"Back"}),"Applicant"!==E.role?Object(q.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:e=>{e.preventDefault(),$("#deleteRequestModal").modal("show")},children:"Delete"}):null]}),Object(q.jsx)("div",{className:"col-12",id:"request-card",children:c?Object(q.jsxs)("div",{className:"card shadow rounded",children:[Object(q.jsxs)("div",{className:"card-header",children:[!["Applicant","Evaluation","Releasing"].includes(E.role)&&(()=>{switch(E.role){case"Admin":return"Received"===(null===c||void 0===c?void 0:c.status);case"Cashier":return"Payment"===(null===c||void 0===c?void 0:c.status);case"Evaluation":return"Evaluating"===(null===c||void 0===c?void 0:c.status);case"Director":case"Registrar":return"Evaluated"===(null===c||void 0===c?void 0:c.status)&&c.for===E.role;case"Releasing":return"Signed"===(null===c||void 0===c?void 0:c.status)}})()?Object(q.jsxs)("button",{className:"btn btn-info btn-sm ".concat(O(i||!c.acknowledged,"disabled")),onClick:e=>{e.preventDefault(),$("#forwardRequestModal").modal("toggle")},disabled:i||!c.acknowledged||!Y(c),children:[Object(q.jsx)("i",{className:"fas fa-bell"})," ",c.acknowledged?U:"You must acknowledge the request first"]}):null,"Evaluation"===E.role?Object(q.jsxs)("button",{className:"btn btn-info btn-sm ".concat(O(i||!c.acknowledged,"disabled")),onClick:e=>{e.preventDefault(),$("#forwardRequestModal").modal("toggle")},disabled:i||!c.acknowledged||!Y(c),children:[Object(q.jsx)("i",{className:"fas fa-bell"})," ",c.acknowledged?"Forward":"You must acknowledge the request first"]}):null,"Releasing"===E.role&&"Notify client for document release"===U?Object(q.jsx)("button",{className:"btn btn-info btn-sm ".concat(O(i||!c.acknowledged,"disabled")),onClick:e=>{e.preventDefault(),C.current&&$(C.current).modal("toggle")},disabled:i||!c.acknowledged||!Y(c),children:c.acknowledged?"Release":"You must acknowledge the request first"}):null,"Admin"===E.role?Object(q.jsx)("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),$("#rejectRequestModal").modal("toggle")},disabled:i||c.rejected||((null===(e=c.tasks)||void 0===e?void 0:e.length)||0)>0&&Y(c),children:"Reject"}):null,Object(q.jsxs)("button",{className:"btn btn-success btn-sm",onClick:e=>{e.preventDefault(),(async()=>{d.a.info("Printing. Please wait.");const e=$(String($("#request-card")[0].innerHTML));e.find("button").remove(),e.find(".bi-plus-circle").remove(),e.find('i[title="Mark as Not Done"]').remove(),e.find('i[title="Mark as Done"]').remove(),e.find('i[title="Edit"]').remove(),e.find('i[title="Delete"]').remove();const t=$("#iframe")[0],a=["https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css","https://fonts.googleapis.com/css?family=Montserrat:400,700,200",I+"/assets/css/bootstrap.min.css",I+"/assets/css/paper-dashboard.css",I+"/assets/demo/demo.css"],s=t.contentWindow;null===s||void 0===s||s.document.open(),s&&s.document&&(s.document.write("<head>"),(await Promise.all(a.map((async e=>{try{const{data:t}=await P.a.get(e,{timeout:5e3});return"<style>".concat(t,"</style>")}catch(t){return'<link href="'.concat(e,'" rel="stylesheet" />')}})))).forEach((e=>{s.document.write(e)})),s.document.write("</head>"),s.document.write("<body>"),s.document.write(e.html()),s.document.write("</body>"),s.document.close(),s.focus(),setTimeout((()=>{s.print()}),500))})()},children:[Object(q.jsx)("i",{className:"fas fa-print"})," Export to PDF"]})]}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsxs)("p",{className:"card-title",children:["Requester's Name: ",c.user.name]}),Object(q.jsxs)("p",{className:"card-text",children:["Document Type: ",c.documentType.name]}),Object(q.jsxs)("p",{className:"card-text",children:["Expired: ",c.expired?"Yes":"No"]}),Object(q.jsxs)("p",{className:"card-text",children:["Acknowledged: ",c.acknowledged?"Yes":"No"]}),null!==(t=c.user)&&void 0!==t&&t.student_id_number?Object(q.jsxs)("p",{className:"card-text",children:["Student ID Number: ",c.user.student_id_number]}):null,Object(q.jsxs)("p",{className:"card-text",children:["Evaluation: ",c.evaluation]}),Object(q.jsxs)("p",{className:"card-text",children:["Last Updated By:"," ",c.logs&&c.logs.length>0&&"Applicant"!==c.logs[c.logs.length-1].user.role?"".concat(c.logs[c.logs.length-1].user.name," - ").concat(u()(c.updated_at).format("MMMM DD, YYYY hh:mm A")):"N/A"]}),Object(q.jsxs)("p",{className:"card-text",children:["Status: ",c.status]}),Object(q.jsx)("p",{className:"card-title",children:"Files:"}),Object(q.jsx)("div",{className:"container-fluid",children:Object(q.jsx)("div",{className:"row",children:null===(a=c.files)||void 0===a?void 0:a.map(((e,t)=>{var a,s;return Object(q.jsx)("div",{className:"col-12 col-md-4 col-lg-3 col-xl-2",children:Object(q.jsx)("a",{href:"".concat(null===(a=e.file)||void 0===a?void 0:a.url,"&download=true"),children:null===(s=e.file)||void 0===s?void 0:s.name})},t)}))})}),Object(q.jsx)("ul",{className:"list-group",children:(e=>{let{level:t,statuses:a}=e;return a.map(((e,a)=>{var s;return Object(q.jsxs)("li",{className:"list-group-item",children:[Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[0!==t?L(e)?Object(q.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):t>=a+1?Object(q.jsx)("i",{className:"bi bi-check-circle mr-1"}):Object(q.jsx)("i",{className:"bi bi-circle mr-1"}):Object(q.jsx)("i",{className:"bi bi-x-circle-fill mr-1"}),e," ",L(e)?"- ".concat(u()(null===(s=L(e))||void 0===s?void 0:s.date).format("MMMM DD, YYYY hh:mm A")):""]}),c.tasks&&c.tasks.length>0?Object(q.jsx)("ul",{className:"list-group mt-2",children:c.tasks.filter((t=>t.for===e)).map(((t,a)=>{return Object(q.jsx)("li",{className:"list-group-item",children:Object(q.jsxs)("div",{className:"d-flex align-items-center",children:[t.done?Object(q.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):Object(q.jsx)("i",{className:"bi bi-circle mr-1"}),Object(q.jsx)("span",{children:t.title}),(s=e,(["Payment","Paid"].includes(s)?"Cashier"===E.role:["Received"].includes(s)?"Admin"===E.role:["Evaluated"].includes(s)?"Evaluation"===E.role:["Signed"].includes(s)?"Director"===E.role||"Registrar"===E.role:["Releasing","Released"].includes(s)?"Releasing"===E.role:s===E.role)?Object(q.jsx)("div",{className:"ml-auto",children:t.done?Object(q.jsx)("i",{className:"bi bi-check-circle-fill mx-1 clickable",title:"Mark as Not Done",onClick:()=>_(t,!1)}):Object(q.jsx)("i",{className:"bi bi-check-circle mx-1 clickable",title:"Mark as Done",onClick:()=>_(t,!0)})}):null)]})},a);var s}))}):null]},a)}))})((e=>{const t=(e=>{switch(e){case"Received":return 1;case"Payment":return 2;case"Evaluating":return 3;case"Evaluated":case"Signed":case"Releasing":return 4;case"Released":return 5;default:return 0}})(e);return{statuses:B.filter((e=>!["Released","Evaluated"].includes(e))),level:t}})(c.status))}),Object(q.jsxs)("div",{className:"card w-100 mx-1 my-4 shadow rounded",children:[Object(q.jsx)("div",{className:"card-header",children:Object(q.jsx)("h4",{className:"card-title",children:"History"})}),Object(q.jsx)("div",{className:"card-body table-responsive",style:{overflowY:"hidden"},children:Object(q.jsxs)("table",{className:"table table-sm text-center",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"User"}),Object(q.jsx)("th",{children:"Action"}),Object(q.jsx)("th",{children:"Date"})]})}),Object(q.jsxs)("tbody",{children:[0===c.logs.length?Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{}),Object(q.jsx)("td",{children:"No Data"}),Object(q.jsx)("td",{})]}):null,c.logs.map(((e,t)=>Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:e.user.name}),Object(q.jsx)("td",{children:e.action}),Object(q.jsx)("td",{children:u()(e.updated_at).format("MMMM DD, YYYY hh:mm A")})]},t)))]})]})})]})]})]}):Object(q.jsx)("div",{className:"d-flex h-100 w-100",children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(q.jsx)("div",{className:"modal fade",id:"deleteRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteRequestModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsx)("h5",{className:"modal-title",id:"deleteRequestModalLabel",children:"Delete Request"}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsx)("div",{className:"modal-body",children:"Are you sure you want to delete this request?"}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),$("#deleteRequestModal").modal("hide"),(async()=>{if(!T){T=!0;try{await P.a.delete("/requests?id=".concat(null===c||void 0===c?void 0:c.id)),d.a.success("Request deleted successfully."),l.goBack()}catch(e){g(e)}finally{T=!1}}})()},children:"Confirm"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(q.jsx)("div",{className:"modal fade",id:"forwardRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"forwardRequestModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsxs)("h5",{className:"modal-title",id:"forwardRequestModalLabel",children:["Releasing"===E.role&&"Notify client for document release"===U?"Release":"Forward"," Request"]}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsxs)("div",{className:"modal-body",children:["Evaluation"===E.role?Object(q.jsxs)("select",{className:"form-control",onChange:e=>{b(e.target.value)},children:[Object(q.jsx)("option",{value:"",children:" -- Select -- "}),["Registrar","Director"].map(((e,t)=>Object(q.jsx)("option",{value:e,children:e},t)))]}):null,"Registrar"===E.role?Object(q.jsxs)("select",{className:"form-control",onChange:e=>{b(e.target.value)},children:[Object(q.jsx)("option",{value:"",children:" -- Select -- "}),["Releasing","Director"].map(((e,t)=>Object(q.jsx)("option",{value:e,children:e},t)))]}):null,Object(q.jsx)("label",{children:"SMS Message"}),Object(q.jsx)("textarea",{cols:20,rows:5,className:"form-control mb-3",onChange:e=>h(e.target.value),value:m}),Object(q.jsx)("label",{children:"Email Message"}),Object(q.jsx)(Q,{onChange:e=>x(e),value:p})]}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),$("#forwardRequestModal").modal("hide"),(async e=>{o(!0);const t={};try{const s=(a=E.role,e&&["Registrar","Director","Releasing"].includes(e)?t.for=e:t.for=null,"Registrar"===a&&"Director"===e?"Evaluated":F(a));if(["Registrar","Director","Releasing"].includes(E.role)){const{data:e}=await P.a.get("/requests/show?id=".concat(null===c||void 0===c?void 0:c.id)),a=Array.from(JSON.parse(e.acknowledged_dates));a.push({date:(new Date).toJSON(),status:"Signed"}),t.acknowledged_dates=JSON.stringify(a)}["Registrar","Director","Releasing"].includes(t.for)||(t.for=null),await P.a.post("/requests?id=".concat(null===c||void 0===c?void 0:c.id),{...t,status:s,acknowledged:["Releasing","Released"].includes(s),sms_message:m,email_message:p,_method:"PUT"}),d.a.info("Request has been updated and forwarded.","Notice"),l.goBack()}catch(s){console.log(s.toJSON()),d.a.error("Something went wrong, please try again later.","Unable to forward")}finally{o(!1)}var a})(j)},children:"Forward"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(q.jsx)("div",{ref:C,className:"modal fade",tabIndex:-1,role:"dialog","aria-labelledby":"releaseModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsx)("h5",{className:"modal-title",id:"releaseModalLabel",children:"Release Request"}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsxs)("div",{className:"modal-body",children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"SMS Message"}),Object(q.jsx)("textarea",{cols:20,rows:5,className:"form-control mb-3",onChange:e=>k(e.target.value),value:w})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"Email Message"}),Object(q.jsx)(Q,{onChange:e=>R(e),value:S})]})]}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),C.current&&$(C.current).modal("hide"),(async()=>{o(!0);try{await P.a.post("/requests",{id:null===c||void 0===c?void 0:c.id,approved:!0,acknowledged:!0,status:"Released",sms_message:w,email_message:S,_method:"PUT"}),d.a.info("Request has been approved and released.","Notice"),l.goBack()}catch(e){console.log(e.toJSON()),d.a.error("Something went wrong, please try again later.","Unable to approve")}finally{o(!1)}})()},children:"Forward"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(q.jsx)("div",{className:"modal fade",id:"rejectRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"rejectRequestModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsx)("h5",{className:"modal-title",id:"rejectRequestModalLabel",children:"Reject Request"}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsxs)("div",{className:"modal-body",children:[Object(q.jsx)("label",{children:"Message"}),Object(q.jsx)("textarea",{cols:20,rows:5,className:"form-control mb-3",onChange:e=>v(e.target.value),value:f}),Object(q.jsx)("label",{children:"Email Message"}),Object(q.jsx)(Q,{onChange:e=>y(e),value:N})]}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),$("#rejectRequestModal").modal("hide"),(async()=>{o(!0);try{await P.a.post("/requests/reject",{id:null===c||void 0===c?void 0:c.id,sms_message:f,email_message:N}),d.a.info("Request has been rejected.","Notice"),l.goBack()}catch(e){console.log(e.toJSON()),d.a.error("Something went wrong, please try again later.","Unable to reject")}finally{o(!1)}})()},children:"Confirm"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(q.jsx)("iframe",{title:"Print Page",id:"iframe",className:"d-none"})]})}function W(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:J}),Object(q.jsx)(r.a,{path:t(S.REQUESTS.INACTIVE),component:Y}),Object(q.jsx)(r.a,{path:t(S.REQUESTS.ARCHIVED),component:I}),Object(q.jsx)(r.a,{path:t("/add"),component:L}),Object(q.jsx)(r.a,{path:t("/:id"),exact:!0,component:G}),Object(q.jsx)(r.a,{path:t("/:id/edit"),component:L})]})}function z(e){let{cms:t,onChange:a}=e;const[c,n]=Object(s.useState)(t.value),[l,i]=Object(s.useState)("View"),[r,o]=Object(s.useState)(!1),j=t.key.includes("picture"),b=Object(s.createRef)(),m=new FileReader;return m.onload=e=>{e.target&&e.target.result&&n(String(e.target.result))},Object(q.jsx)("div",{className:"col-12 col-md-4 col-lg-3 border-0 p-3 mb-4 d-flex",children:Object(q.jsxs)("div",{className:"card",style:{flex:1},children:[j?Object(q.jsx)("img",{className:"card-img-top",src:c,alt:t.key,style:{borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}}):null,Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("h6",{className:"card-title",children:t.key}),Object(q.jsxs)("small",{className:"text-muted form-text mb-4 mt-0",children:["Last Updated: ",u()(t.updated_at).fromNow()]}),"View"===l?Object(q.jsx)("p",{children:j?null:Object(q.jsx)("b",{children:c})}):null,"Edit"===l?j?Object(q.jsxs)("div",{children:[Object(q.jsx)("button",{className:"btn btn-info btn-sm ".concat(O(r,"disabled")),disabled:r,onClick:e=>{e.preventDefault(),!r&&b.current&&b.current.click()},children:r?"Uploaded":"Upload"}),Object(q.jsx)("input",{type:"file",ref:b,className:"d-none",onChange:e=>{e.target.files&&e.target.files.length>0&&!r&&(m.readAsDataURL(e.target.files[0]),o(!0))}})]}):Object(q.jsx)("input",{type:"text",className:"form-control form-control-sm",value:c,placeholder:"Value",onChange:e=>{n(e.target.value)}}):null]})}),Object(q.jsx)("div",{className:"card-footer",children:Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("button",{className:"btn btn-success btn-sm d-inline-block mx-1",onClick:e=>{e.preventDefault(),"Edit"===l?(a(c,(()=>{d.a.info("".concat(t.key," has been updated."),"Notice"),o(!1)})),i("View")):i("Edit")},children:"Edit"===l?"Save":"Edit"}),"Edit"===l?Object(q.jsx)("button",{className:"btn btn-danger btn-sm d-inline-block mx-1",onClick:e=>{e.preventDefault(),i("View")},children:"Cancel"}):null]})})]})})}function K(e){let{faq:t,onChange:a,defaultMode:c}=e;const[n,l]=Object(s.useState)(c||"View"),[i,r]=Object(s.useState)(t.question),[o,j]=Object(s.useState)(t.answer);return Object(q.jsxs)("div",{className:"col-12",children:["View"===n?Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsxs)("label",{htmlFor:"question",children:["Question: ",Object(q.jsx)("b",{children:t.question})]}),Object(q.jsxs)("p",{children:["Answer: ",Object(q.jsx)("b",{children:t.answer})]})]}):null,"Edit"===n?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"text",name:"question",placeholder:"Question",className:"form-control form-control-sm",value:i,onChange:e=>{r(e.target.value)}})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("textarea",{name:"answer",placeholder:"Answer",className:"form-control form-control-sm",value:o,onChange:e=>{j(e.target.value)}})})]}):null,Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("button",{className:"btn btn-success btn-sm d-inline-block mx-1",onClick:e=>{e.preventDefault(),"Edit"===n?(a({question:i,answer:o},(()=>{d.a.info("FAQs has been updated.","Notice")})),l("View")):l("Edit")},children:"Edit"===n?"Save":"Edit"}),"Edit"===n?Object(q.jsx)("button",{className:"btn btn-danger btn-sm d-inline-block mx-1",onClick:e=>{e.preventDefault(),l("View"),r(t.question),j(t.answer)},children:"Cancel"}):null]})]})}function X(){var e;const[t,a]=Object(s.useState)([]),[c,n]=Object(s.useState)("Manage"),l=Object(r.f)(),i=JSON.parse(((e,a)=>{const s=t.find((t=>t.key===e));return s?s.value:a})("faqs",JSON.stringify([]))),o=async()=>{try{const{data:e}=await P.a.get("/cms");a([...e])}catch(e){console.log(e.toJSON()),d.a.error("Unable to fetch CMS entities.","Oops!"),l.goBack()}},j=async e=>{e.id?await P.a.put("/cms",e):await P.a.post("/cms",e)};return Object(s.useEffect)((()=>{o()}),[]),Object(q.jsx)("div",{className:"".concat("Preview"===c?"container-fluid":"container"),children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:e=>{e.preventDefault(),n("Preview"===c?"Manage":"Preview")},children:"Preview"===c?"Manage":"Preview"})}),"Manage"===c?Object(q.jsxs)(q.Fragment,{children:[t.filter((e=>"faqs"!==e.key)).map(((e,t)=>Object(q.jsx)(z,{cms:e,onChange:async(t,a)=>{try{e.value=t,await j(e),a(),o()}catch(s){console.log(s.toJSON()),d.a.error("Unable to update CMS entity.","Oops!")}}},t))),Object(q.jsxs)("div",{className:"col-12",children:[Object(q.jsx)("h3",{className:"mb-0",children:"FAQs"}),t.find((e=>"faqs"===e.key))&&t.find((e=>"faqs"===e.key)).updated_at?Object(q.jsxs)("small",{className:"text-muted mt-0 form-text mb-3",children:["Last Updated: ",u()(null===(e=t.find((e=>"faqs"===e.key)))||void 0===e?void 0:e.updated_at).fromNow()]}):null,Object(q.jsx)("button",{className:"btn btn-success btn-sm",onClick:e=>{e.preventDefault();const s=t.find((e=>"faqs"===e.key));if(s){const e=JSON.parse(s.value);e.push({question:"",answer:"",new:!0}),s.value=JSON.stringify(e);const c=t.findIndex((e=>"faqs"===e.key));t.splice(c,1,s),a([...t])}else{const e=[{question:"",answer:"",new:!0}];t.push({key:"faqs",value:JSON.stringify(e)}),a([...t])}},children:"Add FAQ"}),Object(q.jsx)("hr",{})]}),i.map(((e,s)=>Object(q.jsx)(K,{faq:e,onChange:async(e,c)=>{try{await(async(e,s)=>{i.splice(s,1,e);const c=t.find((e=>"faqs"===e.key)),n=JSON.stringify(i);c?(c.value=n,t.splice(t.findIndex((e=>"faqs"===e.key)),1,c),a([...t]),await j(c)):(t.push({key:"faqs",value:n}),a([...t]),await j({key:"faqs",value:n}))})(e,s),c(),o()}catch(n){console.log(n.toJSON()),d.a.error("Unable to update FAQs.","Oops!")}},defaultMode:e.new?"Edit":"View"},s)))]}):Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("div",{style:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"},children:Object(q.jsx)("iframe",{title:"CMS Preview",src:"".concat(window.location.origin,"?preview=true"),style:{position:"absolute",inset:0,width:"100%",height:"100%"}})})})]})})}function Z(){const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!1),n=Object(r.h)(),l=Object(r.f)(),i=e=>"".concat(n.path).concat(e),o=async()=>{c(!0);try{const{data:e}=await P.a.get("/contacts");t(e)}catch(e){console.log(e.toJSON()),d.a.error("Unable to fetch contacts.")}finally{c(!1)}};return Object(s.useEffect)((()=>{o()}),[]),Object(q.jsx)(T,{title:"Contacts",data:e.map((e=>({...e,created_at:u()(e.created_at).fromNow(),updated_at:u()(e.updated_at).fromNow(),message:Object(q.jsxs)("p",{className:"text-muted m-0 p-0",children:[e.message.substr(0,15),"..."]})}))),processing:a,onAddClick:()=>l.push(i("add")),onViewClick:e=>{let{id:t}=e;l.push(i("".concat(t)))},onEditClick:()=>{},onDeleteConfirm:e=>{let{id:t}=e;(async e=>{c(!0);try{await P.a.delete("/contacts?id=".concat(e)),d.a.success("Contact deleted successfully."),await o()}catch(t){console.log(t.toJSON()),g(t),c(!1)}})(t)},onRefreshClick:o,withAction:!0,pagination:!0,dontShowEdit:!0,disableAddButton:!0})}function ee(){const[e,t]=Object(s.useState)(null),a=Object(r.f)();let c=!1;const{params:n}=Object(r.h)();return Object(s.useEffect)((()=>{(async e=>{try{const{data:a}=await P.a.get("/contacts/show?id=".concat(e));t(a)}catch(s){g(s),a.goBack()}})(n.id)}),[]),Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("h3",{className:"mb-0",children:"View Contact"})}),Object(q.jsxs)("div",{className:"col-12 d-flex",children:[Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:e=>{e.preventDefault(),a.goBack()},children:"Back"}),Object(q.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:e=>{e.preventDefault(),$("#deleteContactModal").modal("show")},children:"Delete"})]}),Object(q.jsx)("div",{className:"col-12",children:e?Object(q.jsx)("div",{className:"card shadow rounded",children:Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("h6",{children:"Name"}),Object(q.jsx)("p",{children:e.name}),Object(q.jsx)("h6",{children:"Email"}),Object(q.jsx)("p",{children:e.email}),Object(q.jsx)("h6",{children:"Message"}),Object(q.jsx)("p",{children:e.message})]})}):Object(q.jsx)("div",{className:"d-flex h-100 w-100",children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(q.jsx)("div",{className:"modal fade",id:"deleteContactModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteContactModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsx)("h5",{className:"modal-title",id:"deleteContactModalLabel",children:"Delete Contact"}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete ",(null===e||void 0===e?void 0:e.name)||"this contact","?"]}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:t=>{t.preventDefault(),$("#deleteContactModal").modal("hide"),(async()=>{if(!c){c=!0;try{await P.a.delete("/contacts?id=".concat(null===e||void 0===e?void 0:e.id)),d.a.success("Contact deleted successfully."),a.goBack()}catch(t){g(t)}finally{c=!1}}})()},children:"Confirm"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})})]})}function te(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:Z}),Object(q.jsx)(r.a,{path:t("/:id"),exact:!0,component:ee})]})}function ae(){var e;const[t,a]=Object(s.useState)(!1),[c,n]=Object(s.useState)("Add"),[l,i]=Object(s.useState)([]),[o,j]=Object(s.useState)({id:-1,name:"",requirements:[],expiry_days:15,type:"Simple"}),b=Object(r.f)(),m=e=>{const{id:t,value:a}=e.target;j({...o,[t]:a})},u=async()=>{if(!t){a(!0);try{const e=new FormData;delete o.files,Object.entries(o).forEach((t=>{let[a,s]=t;return e.append(a,s)})),e.append("requirements",JSON.stringify(o.requirements)),e.append("_method","Add"===c?"post":"put"),l.forEach((t=>{t.file instanceof File&&e.append("files[]",t.file)})),await P.a.post("/document-types",e),d.a.success("Document Type saved successfully."),j({name:"",id:-1,requirements:[],expiry_days:15,type:""})}catch(e){g(e)}finally{a(!1)}}},{params:h,path:p}=Object(r.h)();return Object(s.useEffect)((()=>{p.includes("edit")&&(async e=>{n("Edit");try{const{data:t}=await P.a.get("/document-types/show?id=".concat(e));j((()=>({...t,requirements:(e=>{if(!e)return[];try{return JSON.parse(e)||[]}catch(t){return console.log(t.toJSON()),[]}})(t.requirements)})))}catch(t){g(t),b.goBack()}})(h.id)}),[]),Object(q.jsxs)("form",{className:"container",onSubmit:async e=>{e.preventDefault(),await u()},children:[Object(q.jsxs)("div",{className:"d-flex",children:[Object(q.jsxs)("h3",{className:"align-self-center mb-0",children:[c," Document"]}),Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:e=>{e.preventDefault(),b.goBack()},children:"Back"})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"name",children:"Name"}),Object(q.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:o.name,onChange:m})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"expiry_days",children:"Work Processing Days"}),Object(q.jsx)("input",{type:"number",name:"expiry_days",id:"expiry_days",placeholder:"Expiry Days",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:o.expiry_days,onChange:m})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"type",children:"Type"}),Object(q.jsxs)("select",{name:"type",id:"type",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:o.type,onChange:m,children:[Object(q.jsx)("option",{value:"Simple",children:"Simple"}),Object(q.jsx)("option",{value:"Complex",children:"Complex"}),Object(q.jsx)("option",{value:"Highly Technical",children:"Highly Technical"})]})]}),Object(q.jsx)("div",{className:"container-fluid",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsxs)("div",{className:"col-12",children:[Object(q.jsx)("h4",{children:"Requirements"}),Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:e=>{e.preventDefault(),o.requirements.push(""),j({...o})},children:"Add Requirement"})]}),o.requirements.map(((e,a)=>Object(q.jsxs)("div",{className:"col-12",children:[Object(q.jsx)("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),o.requirements.splice(a,1),j({...o})},children:"Remove Requirement"}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsxs)("label",{children:["Requirement ",a+1]}),Object(q.jsx)("input",{type:"text",placeholder:"Requirement ".concat(a+1),className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:e,onChange:e=>{o.requirements.splice(a,1,e.target.value),j({...o})}})]})]},a))),Object(q.jsxs)("div",{className:"col-12 mt-3 d-none",children:[Object(q.jsx)("h4",{children:"Forms"}),Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:e=>{e.preventDefault(),l.push({file:null,ref:Object(s.createRef)()}),i([...l])},children:"Add Form"})]}),l.map(((e,a)=>Object(q.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3",children:[Object(q.jsx)("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),l.splice(a,1),i([...l])},children:"Remove Form"}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("input",{type:"file",ref:e.ref,className:"d-none ".concat(O(t||null!==e,"disabled")),disabled:t||null!==e.file,onChange:t=>{t.target.files&&t.target.files.length>0&&(l.splice(a,1,{file:t.target.files[0],ref:e.ref}),i([...l]))}}),Object(q.jsx)("button",{className:"btn btn-secondary btn-sm",disabled:null!==e.file,onClick:t=>{t.preventDefault(),null===e.file&&e.ref.current&&(e.ref.current.click(),console.log("yo"))},children:null===e.file?"Upload":"Uploaded"})]})]},a))),"Edit"===c&&o.files&&o.files.length>0?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"col-12 mt-3",children:Object(q.jsx)("h4",{children:"Existing Forms"})}),null===(e=o.files)||void 0===e?void 0:e.map(((e,t)=>{var a,s;return Object(q.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:Object(q.jsx)("div",{className:"card",children:Object(q.jsxs)("div",{className:"card-body d-flex align-items-center",children:[Object(q.jsx)("a",{href:"".concat(null===(a=e.file)||void 0===a?void 0:a.url,"&download=true"),target:"_blank",rel:"noreferrer",children:null===(s=e.file)||void 0===s?void 0:s.name}),Object(q.jsx)("button",{className:"btn btn-danger btn-sm ml-auto",onClick:async a=>{var s;(a.preventDefault(),window.confirm("Delete file?"))&&(d.a.info("Deleting form file.","Notice"),await P.a.delete("/document-types/files?id=".concat(e.id)),d.a.success("Form file deleted."),null===(s=o.files)||void 0===s||s.splice(t,1),j({...o}))},children:"Delete"})]})})},t)}))]}):null]})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(O(t,"disabled")),disabled:t,children:t?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function se(){const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!1),n=Object(r.h)(),l=Object(r.f)(),i=e=>"".concat(n.path).concat(e),o=async()=>{c(!0);try{const{data:e}=await P.a.get("/document-types");t(w(e,["requirements","files"]).map((e=>y({...e,work_processing_days:e.expiry_days},["expiry_days"]))))}catch(e){console.log(e.toJSON()),d.a.error("Unable to fetch Document Types.")}finally{c(!1)}};return Object(s.useEffect)((()=>{o()}),[]),Object(q.jsx)(T,{title:"Document Types",columns:v(e).map((e=>["updated at","created at"].includes(e.toLowerCase())?f(e.split(" ")[0]):e)),data:e.map((e=>({...e,created_at:u()(e.created_at).fromNow(),updated_at:u()(e.updated_at).fromNow()}))),processing:a,onAddClick:()=>l.push(i("add")),onViewClick:e=>{let{id:t}=e;l.push(i("".concat(t)))},onEditClick:e=>{let{id:t}=e;l.push(i("".concat(t,"/edit")))},onDeleteConfirm:e=>{let{id:t}=e;(async e=>{c(!0);try{await P.a.delete("/document-types?id=".concat(e)),d.a.success("Document Type deleted successfully."),await o()}catch(t){console.log(t.toJSON()),d.a.error("Unable to delete Document Type."),c(!1)}})(t)},onRefreshClick:o,withAction:!0,pagination:!0})}function ce(){var e;const[t,a]=Object(s.useState)(null),c=Object(r.f)(),{params:n}=Object(r.h)();return Object(s.useEffect)((()=>{(async e=>{try{const{data:t}=await P.a.get("/document-types/show?id=".concat(e));a({...t,requirements:(e=>{if(!e)return[];try{return JSON.parse(e)||[]}catch(t){return console.log(t.toJSON()),[]}})(t.requirements)})}catch(t){g(t),c.goBack()}})(n.id)}),[]),Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("h3",{className:"mb-0",children:"View Document Type"})}),Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:e=>{e.preventDefault(),c.goBack()},children:"Back"})}),Object(q.jsx)("div",{className:"col-12",children:t?Object(q.jsx)("div",{className:"card shadow rounded",children:Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("h6",{children:"Name"}),Object(q.jsx)("p",{children:t.name}),Object(q.jsx)("h6",{children:"Requirements"}),null===(e=t.requirements)||void 0===e?void 0:e.map(((e,t)=>Object(q.jsx)("p",{className:"card-text",children:e},t)))]})}):Object(q.jsx)("div",{className:"d-flex h-100 w-100",children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]})})}function ne(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:se}),Object(q.jsx)(r.a,{path:t("/add"),component:ae}),Object(q.jsx)(r.a,{path:t("/:id"),exact:!0,component:ce}),Object(q.jsx)(r.a,{path:t("/:id/edit"),component:ae})]})}function le(){const[e,t]=Object(s.useState)([]);return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await P.a.get("/logs");t([...e])}catch(e){console.log(e.toJSON()),g(e)}})()}),[]),Object(q.jsxs)("div",{className:"card w-100",children:[Object(q.jsxs)("div",{className:"card-header",children:[Object(q.jsx)("h3",{className:"card-title",children:"History Logs"}),0===e.length?Object(q.jsx)("p",{className:"card-text",children:"No Data"}):null]}),Object(q.jsx)("div",{className:"card-body table-responsive",style:{overflowY:"hidden"},children:Object(q.jsxs)("table",{className:"table table-sm text-center",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"User"}),Object(q.jsx)("th",{children:"Action"}),Object(q.jsx)("th",{children:"Request Type"}),Object(q.jsx)("th",{children:"Requester's Name"}),Object(q.jsx)("th",{children:"Date"})]})}),Object(q.jsx)("tbody",{children:[...e].reverse().map(((e,t)=>{var a,s,c,n,l;return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:null===(a=e.user)||void 0===a?void 0:a.name}),Object(q.jsx)("td",{children:e.action}),Object(q.jsx)("td",{children:null===(s=e.loggable)||void 0===s||null===(c=s.documentType)||void 0===c?void 0:c.name}),Object(q.jsx)("td",{children:null===(n=e.loggable)||void 0===n||null===(l=n.user)||void 0===l?void 0:l.name}),Object(q.jsx)("td",{children:u()(e.updated_at).format("MMMM DD, YYYY hh:mm A")})]},t)}))})]})})]})}function ie(){const[e,t]=Object(s.useState)({users:0,logs:0,approved_requests:0,pending_requests:0,last_log:null}),a=Object(r.h)(),c=e=>{const t=a.path.split("");return"/"===t[t.length-1]&&t.splice(t.length-1,1),"".concat(t.join("")).concat(e)};return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await P.a.get("/statistics");t(e)}catch(e){console.log(e.toJSON())}})()}),[]),Object(q.jsxs)("div",{children:[Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(q.jsxs)("div",{className:"card card-stats",children:[Object(q.jsx)("div",{className:"card-body ",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-5 col-md-4",children:Object(q.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(q.jsx)("i",{className:"nc-icon nc-globe text-warning"})})}),Object(q.jsx)("div",{className:"col-7 col-md-8",children:Object(q.jsxs)("div",{className:"numbers",children:[Object(q.jsx)("p",{className:"card-category",children:"Pending Requests"}),Object(q.jsx)("p",{className:"card-title",children:e.pending_requests}),Object(q.jsx)("p",{})]})})]})}),Object(q.jsxs)("div",{className:"card-footer",children:[Object(q.jsx)("hr",{}),Object(q.jsxs)(i.b,{to:c(S.REQUESTS.ROOT),className:"stats",children:[Object(q.jsx)("i",{className:"fa fa-edit"}),"View"]})]})]})}),Object(q.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(q.jsxs)("div",{className:"card card-stats",children:[Object(q.jsx)("div",{className:"card-body ",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-5 col-md-4",children:Object(q.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(q.jsx)("i",{className:"nc-icon nc-money-coins text-success"})})}),Object(q.jsx)("div",{className:"col-7 col-md-8",children:Object(q.jsxs)("div",{className:"numbers",children:[Object(q.jsx)("p",{className:"card-category",children:"Completed Requests"}),Object(q.jsx)("p",{className:"card-title",children:e.approved_requests}),Object(q.jsx)("p",{})]})})]})}),Object(q.jsxs)("div",{className:"card-footer ",children:[Object(q.jsx)("hr",{}),Object(q.jsxs)(i.b,{to:c(S.REQUESTS.ROOT),className:"stats",children:[Object(q.jsx)("i",{className:"fa fa-calendar-o"}),"View"]})]})]})}),Object(q.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(q.jsxs)("div",{className:"card card-stats",children:[Object(q.jsx)("div",{className:"card-body ",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-5 col-md-4",children:Object(q.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(q.jsx)("i",{className:"nc-icon nc-vector text-danger"})})}),Object(q.jsx)("div",{className:"col-7 col-md-8",children:Object(q.jsxs)("div",{className:"numbers",children:[Object(q.jsx)("p",{className:"card-category",children:"Total Logs"}),Object(q.jsx)("p",{className:"card-title",children:e.logs}),Object(q.jsx)("p",{})]})})]})}),Object(q.jsxs)("div",{className:"card-footer ",children:[Object(q.jsx)("hr",{}),Object(q.jsxs)("div",{className:"stats",children:[Object(q.jsx)("i",{className:"fa fa-clock-o"}),u()(e.last_log?e.last_log.updated_at:new Date).fromNow()]})]})]})}),Object(q.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-6",children:Object(q.jsxs)("div",{className:"card card-stats",children:[Object(q.jsx)("div",{className:"card-body ",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-5 col-md-4",children:Object(q.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(q.jsx)("i",{className:"nc-icon nc-favourite-28 text-primary"})})}),Object(q.jsx)("div",{className:"col-7 col-md-8",children:Object(q.jsxs)("div",{className:"numbers",children:[Object(q.jsx)("p",{className:"card-category",children:"Users"}),Object(q.jsx)("p",{className:"card-title",children:e.users}),Object(q.jsx)("p",{})]})})]})}),Object(q.jsxs)("div",{className:"card-footer ",children:[Object(q.jsx)("hr",{}),Object(q.jsxs)(i.b,{to:c(S.USERS),className:"stats",children:[Object(q.jsx)("i",{className:"fa fa-refresh"}),"View"]})]})]})})]}),Object(q.jsx)(le,{})]})}function re(){const[e,t]=Object(s.useState)(!1),[a,c]=Object(s.useState)("Add"),[n,l]=Object(s.useState)({id:-1,name:"",email:"",password:"",role:"Applicant",phone:"63"}),i=Object(r.f)(),o=e=>{const{id:t,value:a}=e.target;l({...n,[t]:a})},j=async()=>{if(!e){t(!0);try{await("Add"===a?P.a.post("/users",n):P.a.put("/users",n)),d.a.success("User saved successfully."),"Add"===a&&l({name:"",email:"",password:"",role:n.role,id:-1,phone:"63"})}catch(s){g(s)}finally{t(!1)}}},{params:b,path:m}=Object(r.h)();return Object(s.useEffect)((()=>{m.includes("edit")&&(async e=>{c("Edit");try{const{data:t}=await P.a.get("/users/show?id=".concat(e));t.password="",l(t)}catch(t){g(t),i.goBack()}})(b.id)}),[]),Object(q.jsxs)("form",{className:"container",onSubmit:async e=>{e.preventDefault(),await j()},children:[Object(q.jsxs)("div",{className:"d-flex",children:[Object(q.jsxs)("h3",{className:"align-self-center mb-0",children:[a," User"]}),Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:e=>{e.preventDefault(),i.goBack()},children:"Back"})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"name",children:"Name"}),Object(q.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"form-control form-control-sm ".concat(O(e,"disabled")),disabled:e,value:n.name,onChange:o})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(q.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email",className:"form-control form-control-sm ".concat(O(e,"disabled")),disabled:e,value:n.email,onChange:o})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(q.jsx)("input",{type:"text",name:"phone",id:"phone",placeholder:"Phone",className:"form-control form-control-sm ".concat(O(e,"disabled")),disabled:e,value:n.phone,onChange:o})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(q.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(O(e,"disabled")),disabled:e,value:n.password,onChange:o})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"role",children:"Role"}),Object(q.jsx)("select",{name:"role",id:"role",className:"form-control form-control-sm",value:n.role,onChange:o,children:["Admin","Cashier","Evaluation","Director","Registrar","Releasing","Applicant"].map(((e,t)=>Object(q.jsx)("option",{value:e,children:e},t)))})]}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(O(e,"disabled")),disabled:e,children:e?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function oe(){const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!1),n=Object(r.h)(),l=Object(r.f)(),o=e=>"".concat(n.path).concat(e),j=async()=>{c(!0);try{const{data:e}=await P.a.get("/users");t(w(e,["profile_picture_id"]))}catch(e){console.log(e.toJSON()),d.a.error("Unable to fetch users.")}finally{c(!1)}};Object(s.useEffect)((()=>{j()}),[]);return Object(q.jsx)(T,{title:"Users",columns:v(e).map((e=>["updated at","created at"].includes(e.toLowerCase())?f(e.split(" ")[0]):"profile picture"===e.toLowerCase()?"":e)),data:e.map((e=>{var t,a;return{...e,created_at:u()(e.created_at).fromNow(),updated_at:u()(e.updated_at).fromNow(),role:Object(q.jsx)("span",{className:"badge badge-".concat((a=e.role,"Admin"===a?"red":"Applicant"===a?"warning":"green")),children:e.role}),profilePicture:Object(q.jsx)(i.b,{to:o("".concat(e.id)),children:Object(q.jsx)("img",{src:(null===(t=e.profilePicture)||void 0===t?void 0:t.url)||"https://via.placeholder.com/40",className:"rounded-circle shadow-sm border img-fluid d-none d-xl-block",style:{height:"40px",width:"40px"},alt:"Profile"})})}})),processing:a,onAddClick:()=>l.push(o("add")),onViewClick:e=>{let{id:t}=e;l.push(o("".concat(t)))},onEditClick:e=>{let{id:t}=e;l.push(o("".concat(t,"/edit")))},onDeleteConfirm:e=>{let{id:t}=e;(async e=>{c(!0);try{await P.a.delete("/users?id=".concat(e)),d.a.success("User deleted successfully."),await j()}catch(t){console.log(t.toJSON()),g(t),c(!1)}})(t)},onRefreshClick:j,withAction:!0,pagination:!0})}function de(){var e;const[t,a]=Object(s.useState)(null),c=Object(r.f)();let n=!1;const{params:l}=Object(r.h)();Object(s.useEffect)((()=>{(async e=>{try{const{data:t}=await P.a.get("/users/show?id=".concat(e));a(t)}catch(t){g(t),c.goBack()}})(l.id)}),[]);const o=(null===t||void 0===t||null===(e=t.profilePicture)||void 0===e?void 0:e.url)||"https://via.placeholder.com/200";return Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("h3",{className:"mb-0",children:"View User"})}),Object(q.jsxs)("div",{className:"col-12 d-flex",children:[Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:e=>{e.preventDefault(),c.goBack()},children:"Back"}),Object(q.jsx)(i.b,{to:"".concat(window.location.pathname,"/edit"),className:"btn btn-warning btn-sm align-self-center ml-auto",children:"Edit"}),Object(q.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:e=>{e.preventDefault(),$("#deleteUserModal").modal("show")},children:"Delete"})]}),Object(q.jsx)("div",{className:"col-12",children:t?Object(q.jsx)("div",{className:"card shadow rounded",children:Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("img",{src:o,alt:"Profile",className:"img-fluid rounded-circle mb-3",style:{height:"50px",width:"50px"}}),Object(q.jsx)("h6",{children:"Name"}),Object(q.jsx)("p",{children:t.name}),Object(q.jsx)("h6",{children:"Email"}),Object(q.jsx)("p",{children:t.email}),Object(q.jsx)("h6",{children:"Phone"}),Object(q.jsx)("p",{children:t.phone}),Object(q.jsx)("h6",{children:"Role"}),Object(q.jsx)("p",{children:t.role})]})}):Object(q.jsx)("div",{className:"d-flex h-100 w-100",children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(q.jsx)("div",{className:"modal fade",id:"deleteUserModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteUserModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsx)("h5",{className:"modal-title",id:"deleteUserModalLabel",children:"Delete User"}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete ",(null===t||void 0===t?void 0:t.name)||"this user","?"]}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),$("#deleteUserModal").modal("hide"),(async()=>{if(!n){n=!0;try{await P.a.delete("/users?id=".concat(null===t||void 0===t?void 0:t.id)),d.a.success("User deleted successfully."),c.goBack()}catch(e){g(e)}finally{n=!1}}})()},children:"Confirm"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})})]})}function je(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:oe}),Object(q.jsx)(r.a,{path:t("/add"),component:re}),Object(q.jsx)(r.a,{path:t("/:id"),exact:!0,component:de}),Object(q.jsx)(r.a,{path:t("/:id/edit"),component:re})]})}function be(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:ie}),Object(q.jsx)(r.a,{path:t(S.USERS),component:je}),Object(q.jsx)(r.a,{path:t(S.DOCUMENT_TYPES),component:ne}),Object(q.jsx)(r.a,{path:t(S.REQUESTS.ROOT),component:W}),Object(q.jsx)(r.a,{path:t(S.CMS),component:X}),Object(q.jsx)(r.a,{path:t(S.CONTACTS),component:te})]})}function me(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t),a=[{url:S.DASHBOARD,icon:"nc-icon nc-bank",title:"Dashboard"},{url:t(S.DOCUMENT_TYPES),icon:"nc-icon nc-book-bookmark",title:"Document Types"},{url:t(S.REQUESTS.ROOT),icon:"nc-icon nc-tag-content",title:"Requests"},{url:t("".concat(S.REQUESTS.ROOT).concat(S.REQUESTS.INACTIVE)),icon:"nc-icon nc-calendar-60",title:"Inactive Requests"},{url:t("".concat(S.REQUESTS.ROOT).concat(S.REQUESTS.ARCHIVED)),icon:"nc-icon nc-box-2",title:"Repository"},{url:t(S.USERS),icon:"nc-icon nc-single-02",title:"Users"},{url:t(S.CMS),icon:"nc-icon nc-layout-11",title:"Customization"},{url:t(S.CONTACTS),icon:"nc-icon nc-single-copy-04",title:"Contacts"}];return Object(q.jsx)("div",{className:"sidebar-wrapper bg-maroon",style:{overflowX:"hidden"},children:Object(q.jsx)("ul",{className:"nav",children:a.map(((e,t)=>Object(q.jsx)("li",{className:O(e.url===window.location.pathname,"active"),children:Object(q.jsxs)(i.b,{to:e.url,children:[Object(q.jsx)("i",{className:e.icon}),Object(q.jsx)("p",{children:e.title})]})},t)))})})}function ue(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:ie}),Object(q.jsx)(r.a,{path:t(S.REQUESTS.ROOT),component:W})]})}function he(){const e=Object(r.h)(),t=[{url:S.DASHBOARD,icon:"nc-icon nc-bank",title:"Dashboard"},{url:(a=S.REQUESTS.ROOT,"".concat(e.path).concat(a)),icon:"nc-icon nc-tag-content",title:"Requests"}];var a;return Object(q.jsx)("div",{className:"sidebar-wrapper",style:{overflowX:"hidden"},children:Object(q.jsx)("ul",{className:"nav",children:t.map(((e,t)=>Object(q.jsx)("li",{className:O(e.url===window.location.pathname,"active"),children:Object(q.jsxs)(i.b,{to:e.url,children:[Object(q.jsx)("i",{className:e.icon}),Object(q.jsx)("p",{children:e.title})]})},t)))})})}function pe(){var e;const[t,a]=Object(s.useState)(!1),[c,n]=Object(s.useState)(D.get("user")),[l,r]=Object(s.useState)((null===(e=c.profilePicture)||void 0===e?void 0:e.url)||"https://via.placeholder.com/200"),o=c,j=Object(s.createRef)(),b=new FileReader;let m=!1;b.onload=async e=>{if(e.target&&e.target.result){if(m)return;m=!0;try{var t;const{data:a}=await P.a.put("/self/profile",{file:String(e.target.result)});r((null===(t=a.profilePicture)||void 0===t?void 0:t.url)||"https://via.placeholder.com/200"),D.set("user",a),d.a.info("Profile picture saved.","Info")}catch(a){console.log(a),g(a)}finally{$("#file-upload")[0].reset(),m=!1}}};Object(s.useEffect)((()=>{$(".main-panel").removeClass("h-100");const e=D.listen("user",(e=>{n({...c})}));return()=>{D.unlisten("user",e)}}),[]);const u=e=>{const{id:t,value:a}=e.target;n({...c,[t]:a})};return Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-user w-100",children:[Object(q.jsx)("div",{className:"image",children:Object(q.jsx)("img",{src:"/assets/img/damir-bosnjak.jpg",alt:"..."})}),Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("a",{href:window.location.pathname,title:"Change Profile Picture",onClick:e=>{var t;e.preventDefault(),null===(t=j.current)||void 0===t||t.click()},children:Object(q.jsx)("img",{className:"avatar border-gray shadow-sm",src:l,alt:"..."})}),Object(q.jsx)(i.b,{to:window.location.pathname,children:Object(q.jsx)("h5",{className:"title",children:o.name})}),Object(q.jsxs)("p",{className:"description",children:["@",o.name.split(" ").join("").toLowerCase()]})]})}),Object(q.jsxs)("div",{className:"card-footer",children:[Object(q.jsx)("hr",{}),Object(q.jsx)("div",{className:"button-container",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-lg-3 col-md-6 col-6 ml-auto",children:Object(q.jsxs)("h5",{children:["12",Object(q.jsx)("br",{}),Object(q.jsx)("small",{children:"Files"})]})}),Object(q.jsx)("div",{className:"col-lg-4 col-md-6 col-6 ml-auto mr-auto",children:Object(q.jsxs)("h5",{children:["2",Object(q.jsx)("br",{}),Object(q.jsx)("small",{children:"Requests"})]})}),Object(q.jsx)("div",{className:"col-lg-3 mr-auto",children:Object(q.jsxs)("h5",{children:["5",Object(q.jsx)("br",{}),Object(q.jsx)("small",{children:"Logins"})]})})]})})]})]})}),Object(q.jsx)("div",{className:"col-md-8",children:Object(q.jsxs)("div",{className:"card card-user",children:[Object(q.jsx)("div",{className:"card-header",children:Object(q.jsx)("h5",{className:"card-title",children:"Edit Profile"})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("form",{id:"file-upload",onSubmit:e=>e.preventDefault(),children:Object(q.jsx)("input",{type:"file",ref:j,className:"d-none",onChange:e=>{e.target.files&&e.target.files.length>0&&b.readAsDataURL(e.target.files[0])},accept:"image/*"})}),Object(q.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await(async()=>{a(!0);try{const e=await P.a.put("/self",c);D.set("user",e.data),d.a.info("Profile updated successfully.","Info")}catch(e){console.log(e),g(e)}finally{a(!1)}})()},children:[Object(q.jsx)("div",{className:"row",children:Object(q.jsxs)("div",{className:"col-12",children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"name",children:"Name"}),Object(q.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:c.name,onChange:u})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(q.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:c.email,onChange:u})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(q.jsx)("input",{type:"text",name:"phone",id:"phone",placeholder:"Phone",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:c.phone,onChange:u})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(q.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(O(t,"disabled")),disabled:t,value:c.password,onChange:u})]})]})}),Object(q.jsx)("div",{className:"row",children:Object(q.jsx)("div",{className:"update ml-auto mr-auto",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-round text-center ".concat(O(t,"disabled")),style:{width:"160px"},disabled:t,children:t?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Update Profile"})})})]})]})]})})]})}function Oe(){return Object(q.jsx)("footer",{className:"footer d-none",style:{position:"absolute",bottom:0,width:"-webkit-fill-available"},children:Object(q.jsx)("div",{className:"container-fluid",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("nav",{className:"footer-nav",children:Object(q.jsxs)("ul",{children:[Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/",target:"_blank",onClick:e=>{e.preventDefault()},children:"Blog"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/",target:"_blank",onClick:e=>{e.preventDefault()},children:"Licenses"})})]})}),Object(q.jsx)("div",{className:"credits ml-auto",children:Object(q.jsxs)("span",{className:"copyright",children:["\xa9 2020, made with ",Object(q.jsx)("i",{className:"fa fa-heart heart"})," by JMM"]})})]})})})}function xe(){const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)([]),n=Object(r.h)(),l=n.path.split("/"),o=N(l[l.length-1]),j=Object(r.f)(),b=D.get("user");return Object(s.useEffect)((()=>{const e=setInterval((()=>(async()=>{try{const{data:e}=await P.a.get("/requests/expiring");if("Applicant"===b.role&&e.length>0)return t(Array.from(e.filter((e=>e.user_id===b.id))));t(Array.from(e))}catch(e){console.log(e.toJSON())}})()),18e4),a=setInterval((()=>(async()=>{try{const{data:e}=await P.a.get("/requests/almost-expiring");if("Applicant"===b.role&&e.length>0)return c(Array.from(e.filter((e=>e.user_id===b.id))));c(Array.from(e))}catch(e){console.log(e.toJSON())}})()),18e4);return()=>{clearInterval(e),clearInterval(a)}}),[]),Object(q.jsx)("nav",{className:"navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent ",children:Object(q.jsxs)("div",{className:"container-fluid bg-grad",children:[Object(q.jsxs)("div",{className:"navbar-wrapper",children:[Object(q.jsx)("div",{className:"navbar-toggle",children:Object(q.jsxs)("button",{type:"button",className:"navbar-toggler",children:[Object(q.jsx)("span",{className:"navbar-toggler-bar bar1"}),Object(q.jsx)("span",{className:"navbar-toggler-bar bar2"}),Object(q.jsx)("span",{className:"navbar-toggler-bar bar3"})]})}),Object(q.jsx)("a",{className:"navbar-brand",href:"/",onClick:e=>e.preventDefault(),children:o})]}),Object(q.jsxs)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navigation","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation",children:[Object(q.jsx)("span",{className:"navbar-toggler-bar navbar-kebab"}),Object(q.jsx)("span",{className:"navbar-toggler-bar navbar-kebab"}),Object(q.jsx)("span",{className:"navbar-toggler-bar navbar-kebab"})]}),Object(q.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(q.jsxs)("ul",{className:"navbar-nav",children:[Object(q.jsxs)("li",{className:"nav-item btn-rotate dropdown ".concat(O(0===e.length&&0===a.length,"d-none")),children:[Object(q.jsxs)("a",{className:"nav-link dropdown-toggle",href:"/","data-toggle":"dropdown","aria-expanded":"false",children:[Object(q.jsx)("i",{className:"nc-icon nc-bell-55"}),Object(q.jsx)("p",{children:Object(q.jsx)("span",{className:"d-lg-none d-md-block",children:"Notifications"})})]}),Object(q.jsxs)("div",{className:"dropdown-menu dropdown-menu-right p-0",children:[e.map(((e,t)=>{var a;return Object(q.jsxs)(i.b,{className:"dropdown-item d-flex",to:"".concat(S.DASHBOARD).concat(S.REQUESTS.ROOT,"/").concat(e.id),children:[Object(q.jsx)("i",{className:"nc-icon nc-key-25 align-self-center mr-1"}),Object(q.jsxs)("span",{className:"align-self-center",children:["Request for user ",null===(a=e.user)||void 0===a?void 0:a.name," has expired."]})]},t)})),a.map(((e,t)=>{var a;return Object(q.jsxs)(i.b,{className:"dropdown-item d-flex",to:"".concat(S.DASHBOARD).concat(S.REQUESTS.ROOT,"/").concat(e.id),children:[Object(q.jsx)("i",{className:"nc-icon nc-key-25 align-self-center mr-1"}),Object(q.jsxs)("span",{className:"align-self-center",children:["Request for user ",null===(a=e.user)||void 0===a?void 0:a.name," is about to expire."]})]},t)}))]})]}),Object(q.jsxs)("li",{className:"nav-item btn-rotate dropdown",children:[Object(q.jsxs)("a",{className:"nav-link dropdown-toggle",href:"/","data-toggle":"dropdown","aria-expanded":"false",children:[Object(q.jsx)("i",{className:"nc-icon nc-circle-10"}),Object(q.jsx)("p",{children:Object(q.jsx)("span",{className:"d-lg-none d-md-block",children:"Account"})})]}),Object(q.jsxs)("div",{className:"dropdown-menu dropdown-menu-right p-0","aria-labelledby":"navbarDropdownMenuLink",children:[Object(q.jsxs)(i.b,{to:(m=S.PROFILE,"".concat(n.path).concat(m)),className:"dropdown-item d-flex",children:[Object(q.jsx)("i",{className:"nc-icon nc-single-02 align-self-center mr-1"}),Object(q.jsx)("span",{className:"align-self-center",children:"Profile"})]}),Object(q.jsxs)("a",{className:"dropdown-item d-flex",href:"/logout",onClick:e=>{e.preventDefault(),(async()=>{try{await P.a.post("/auth/logout")}catch(e){console.log(e)}finally{D.clear(),j.push(S.LOGIN),d.a.info("Logged out successfully.","Info")}})()},children:[Object(q.jsx)("i",{className:"nc-icon nc-key-25 align-self-center mr-1"}),Object(q.jsx)("span",{className:"align-self-center",children:"Logout"})]})]})]})]})})]})});var m}function fe(){var e;const[t,a]=Object(s.useState)(!0),[c,n]=Object(s.useState)({document_type_id:-1,approved:!1,status:"Received",user_id:D.get("user").id,copies:1,reason:"",acknowledged_dates:JSON.stringify([])}),[l,i]=Object(s.useState)([]),[o,j]=Object(s.useState)([]),[b,m]=Object(s.useState)([]),u=Object(r.f)(),h=e=>{const{id:t,value:a}=e.target;n({...c,[t]:a})};Object(s.useEffect)((()=>{(async()=>{try{const e=await P.a.get("/document-types");if(0===e.data.length)return d.a.info("There are no available documents that you can request right now. Please try again later.","Notice"),u.goBack();m(e.data),n({...c,document_type_id:e.data[0].id}),a(!1)}catch(e){console.log(e.toJSON()),d.a.error("Unable to connect to server. Please try again later."),u.goBack()}})()}),[]);const p=D.get("user"),x=async()=>{if(!t){a(!0);try{const t=new FormData;for(const e in c)t.append(e,c[e]);o.filter((e=>e instanceof File)).forEach((e=>t.append("files[]",e)));const{data:a}=await P.a.post("/requests",t);var e;if(a.documentType)await Promise.all(Array.from(JSON.parse((null===(e=a.documentType)||void 0===e?void 0:e.requirements)||"[]")).map((e=>(async(e,t)=>{try{await P.a.post("/requests/tasks",{for:"Received",title:e,request_id:t.id,done:!1,name:p.name})}catch(a){console.log(a.toJSON())}})(e,a))));j([]),d.a.success("Request created successfully.")}catch(s){g(s)}finally{a(!1)}}};return Object(q.jsxs)("form",{className:"container text-yellow",onSubmit:async e=>{e.preventDefault(),await x()},children:[Object(q.jsxs)("div",{className:"d-flex",children:[Object(q.jsx)("h3",{className:"align-self-center mb-0 text-yellow",children:"Create Request"}),Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center ml-auto",onClick:e=>{e.preventDefault(),u.goBack()},children:"Back"})]}),Object(q.jsxs)("div",{className:"form-group text-yellow",children:[Object(q.jsx)("label",{htmlFor:"document_type_id",children:"Document Type"}),Object(q.jsx)("select",{name:"document_type_id",id:"document_type_id",className:"form-control form-control-sm",onChange:h,value:c.document_type_id,children:b.map(((e,t)=>Object(q.jsx)("option",{value:e.id,children:e.name},t)))})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"copies ",children:"Copies"}),Object(q.jsx)("input",{type:"number",name:"copies",id:"copies",placeholder:"Copies",className:"form-control form-control-sm",onChange:h,value:c.copies})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"reason",children:"Reason"}),Object(q.jsxs)("select",{name:"reason",id:"reason",placeholder:"Reason",className:"form-control form-control-sm",onChange:h,value:c.reason,children:[Object(q.jsx)("option",{value:"Readmission",children:"Readmission"},"Readmission"),Object(q.jsx)("option",{value:"Employment - Local",children:"Employment - Local"},"Employment - Local"),Object(q.jsx)("option",{value:"Employment - Abroad",children:"Employment - Abroad"},"Employment - Abroad"),Object(q.jsx)("option",{value:"Transfer to other School",children:"Transfer to other School"},"Transfer to other School"),Object(q.jsx)("option",{value:"Further Studies",children:"Further Studies"},"Further Studies"),Object(q.jsx)("option",{value:"Job Promotion",children:"Job Promotion"},"Job Promotion")]})]}),Object(q.jsxs)("div",{className:"container-fluid",children:[Object(q.jsx)("h6",{children:"Requirements"}),(e=>{if(!e)return[];try{const t=JSON.parse(e);return t||[]}catch(t){return console.log(t.toJSON()),[]}})((null===(e=b.find((e=>Number(e.id)===Number(c.document_type_id))))||void 0===e?void 0:e.requirements)||"").map(((e,t)=>Object(q.jsx)("p",{children:e},t))),Object(q.jsx)("h6",{children:"Compliance"}),Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:e=>{e.preventDefault(),l.push(Object(s.createRef)()),i([...l]),o.push(null),j([...o])},children:"Add File"})}),l.map(((e,t)=>{var a;return Object(q.jsxs)("div",{className:"col-12 col-md-4 col-lg-3 col-xl-2 p-2 border rounded",children:[Object(q.jsx)("p",{children:o[t]?null===(a=o[t])||void 0===a?void 0:a.name:""}),Object(q.jsx)("button",{className:"btn ".concat(null===o[t]?"btn-secondary":"btn-danger"," btn-sm"),onClick:a=>{var s;(a.preventDefault(),null===o[t])?null===(s=e.current)||void 0===s||s.click():(o.splice(t,1),j([...o]),l.splice(t,1),i([...l]))},children:null===o[t]?"Upload":"Remove"}),Object(q.jsx)("input",{ref:e,type:"file",className:"d-none",onChange:e=>{e.target.files&&e.target.files.length>0&&(o.splice(t,1,e.target.files[0]),j([...o]))}})]},t)}))]})})]}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm ".concat(O(t,"disabled")),disabled:t,children:t?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Save"})})]})}function ge(){const[e,t]=Object(s.useState)([]),[a,c]=Object(s.useState)(!1),n=Object(r.h)(),l=Object(r.f)(),i=e=>"".concat(n.path).concat(e),o=async()=>{c(!0);try{const{data:e}=await P.a.get("/self/requests");t(w(e,["document_type_id","file_id","user_id","file","acknowledged_dates","for"]))}catch(e){console.log(e.toJSON()),d.a.error("Unable to fetch requests.")}finally{c(!1)}};return Object(s.useEffect)((()=>{o()}),[]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(U,{}),Object(q.jsx)(T,{title:"Requests",data:w(e.map((e=>({...e,documentType:e.documentType.name,approved:e.approved?"Yes":"No",expired:e.expired?Object(q.jsx)("span",{className:"badge badge-red",children:"Yes"}):Object(q.jsx)("span",{className:"badge badge-green",children:"No"}),created_at:u()(e.created_at).fromNow(),updated_at:u()(e.updated_at).fromNow(),acknowledged:e.acknowledged?Object(q.jsx)("span",{className:"badge badge-green",children:"Yes"}):Object(q.jsx)("span",{className:"badge badge-red",children:"No"}),status:e.acknowledged&&!e.rejected?Object(q.jsx)("span",{className:"badge badge-green",children:e.status}):Object(q.jsx)("span",{className:"badge badge-danger",children:e.rejected?"Rejected":"Pending"})}))),["rejected"]),processing:a,onAddClick:()=>l.push(i("add")),onViewClick:e=>{let{id:t}=e;l.push(i("".concat(t)))},onEditClick:()=>{},onDeleteConfirm:()=>{},onRefreshClick:o,withAction:!0,pagination:!0,dontShowEdit:!0,dontShowDelete:!0})]})}function ve(){var e;const[t,a]=Object(s.useState)(null),c=Object(r.f)(),[n,l]=Object(s.useState)(""),o=D.get("user");let j=!1;const{params:b}=Object(r.h)(),m=window.location.origin,h=e=>Array.from(JSON.parse((null===t||void 0===t?void 0:t.acknowledged_dates)||"[]")).find((t=>t.status===e));return Object(s.useEffect)((()=>{(async e=>{try{const{data:t}=await P.a.get("/requests/show?id=".concat(e));a(t)}catch(t){g(t),c.goBack()}})(b.id)}),[]),Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-12",children:Object(q.jsx)("h3",{className:"mb-0",children:"View Request"})}),Object(q.jsxs)("div",{className:"col-12 d-flex",children:[Object(q.jsx)("button",{className:"btn btn-info btn-sm align-self-center",onClick:e=>{e.preventDefault(),c.goBack()},children:"Back"}),o&&"Applicant"!==o.role?Object(q.jsx)(i.b,{to:"".concat(window.location.pathname,"/edit"),className:"btn btn-warning btn-sm align-self-center ml-auto",children:"Edit"}):null,o&&"Applicant"!==o.role?Object(q.jsx)("a",{href:"".concat(window.location.pathname,"/delete"),className:"btn btn-danger btn-sm align-self-center ml-1",onClick:e=>{e.preventDefault(),$("#deleteRequestModal").modal("show")},children:"Delete"}):null]}),Object(q.jsx)("div",{className:"col-12",id:"request-card",children:t?Object(q.jsxs)("div",{className:"card shadow rounded",children:[Object(q.jsx)("div",{className:"card-header",children:Object(q.jsxs)("button",{className:"btn btn-success btn-sm",onClick:e=>{e.preventDefault(),(async()=>{const e=$(String($("#request-card")[0].innerHTML));e.find("button").remove(),e.find(".bi-plus-circle").remove(),e.find('i[title="Mark as Not Done"]').remove(),e.find('i[title="Mark as Done"]').remove(),e.find('i[title="Edit"]').remove(),e.find('i[title="Delete"]').remove();const t=$("#iframe")[0],a=["https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css","https://fonts.googleapis.com/css?family=Montserrat:400,700,200",m+"/assets/css/bootstrap.min.css",m+"/assets/css/paper-dashboard.css",m+"/assets/demo/demo.css"],s=t.contentWindow;if(null===s||void 0===s||s.document.open(),s&&s.document){s.document.write("<head>");const t=await Promise.all(a.map((async e=>{try{const{data:t}=await P.a.get(e);return"<style>".concat(t,"</style>")}catch(t){return'<link href="'.concat(e,'" rel="stylesheet" />')}})));console.log(t),t.forEach((e=>{s.document.write(e)})),s.document.write("</head>"),s.document.write("<body>"),s.document.write(e.html()),s.document.write("</body>"),s.document.close(),s.focus(),setTimeout((()=>{s.print()}),500)}})()},children:[Object(q.jsx)("i",{className:"fas fa-print"})," Export to PDF"]})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsxs)("p",{className:"card-title",children:["Requester's Name: ",t.user.name]}),Object(q.jsxs)("p",{className:"card-title",children:["Date: ",u()(t.updated_at).format("MMMM DD, YYYY hh:mm A")]}),Object(q.jsxs)("p",{className:"card-text",children:["Document Type: ",t.documentType.name]}),null!==(e=t.user)&&void 0!==e&&e.student_id_number?Object(q.jsxs)("p",{className:"card-text",children:["Student ID Number: ",t.user.student_id_number]}):null,Object(q.jsxs)("p",{className:"card-text",children:["Last Updated By:"," ",t.logs&&t.logs.length>0&&"Applicant"!==t.logs[t.logs.length-1].user.role?"".concat(t.logs[t.logs.length-1].user.name," - ").concat(u()(t.logs[t.logs.length-1].created_at).format("MMMM DD, YYYY")):"N/A"]}),Object(q.jsxs)("p",{className:"card-text mb-2",children:["Status: ",t.status]}),Object(q.jsx)("ul",{className:"list-group",children:(e=>{let{level:a,statuses:s}=e;return s.map(((e,s)=>{var c;return Object(q.jsxs)("li",{className:"list-group-item",children:[0!==a?h(e)?Object(q.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):a>=s+1?Object(q.jsx)("i",{className:"bi bi-check-circle mr-1"}):Object(q.jsx)("i",{className:"bi bi-circle mr-1"}):Object(q.jsx)("i",{className:"bi bi-x-circle-fill mr-1"}),e," ",h(e)?"- ".concat(u()(null===(c=h(e))||void 0===c?void 0:c.date).format("MMMM DD, YYYY hh:mm A")):"",t.tasks?Object(q.jsx)("ul",{className:"list-group mt-2",children:t.tasks.filter((t=>t.for===e)).map(((e,t)=>Object(q.jsxs)("li",{className:"list-group-item",children:[e.done?Object(q.jsx)("i",{className:"bi bi-check-circle-fill mr-1"}):Object(q.jsx)("i",{className:"bi bi-circle mr-1"}),e.title]},t)))}):null]},s)}))})((e=>{const t=(e=>{switch(e){case"Received":return 1;case"Payment":return 2;case"Evaluating":return 3;case"Evaluated":case"Signed":case"Releasing":return 4;case"Released":return 5;default:return 0}})(e);return{statuses:B.filter((e=>!["Released","Evaluated"].includes(e))),level:t}})(t.status))}),Object(q.jsxs)("div",{className:"card w-100 mx-1 my-4 shadow rounded",children:[Object(q.jsx)("div",{className:"card-header",children:Object(q.jsx)("h4",{className:"card-title",children:"History"})}),Object(q.jsx)("div",{className:"card-body table-responsive",style:{overflowY:"hidden"},children:Object(q.jsxs)("table",{className:"table table-sm text-center",children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"User"}),Object(q.jsx)("th",{children:"Action"}),Object(q.jsx)("th",{children:"Date"})]})}),Object(q.jsxs)("tbody",{children:[0===t.logs.length?Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{}),Object(q.jsx)("td",{children:"No Data"}),Object(q.jsx)("td",{})]}):null,t.logs.map(((e,t)=>Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:e.user.name}),Object(q.jsx)("td",{children:e.action}),Object(q.jsx)("td",{children:u()(e.updated_at).format("MMMM DD, YYYY hh:mm A")})]},t)))]})]})})]}),null!==t.evaluation?null:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("hr",{className:"my-2"}),Object(q.jsx)("h6",{children:"Leave a Feedback"}),Object(q.jsx)("textarea",{cols:30,rows:4,className:"form-control",onChange:e=>{l(e.target.value)},value:n}),Object(q.jsx)("button",{className:"btn btn-info btn-sm",onClick:e=>{e.preventDefault(),(async()=>{try{await P.a.put("/requests?id=".concat(null===t||void 0===t?void 0:t.id),{evaluation:n}),a({...t,evaluation:n}),d.a.success("Feedback sent successfully!")}catch(e){console.log(e.toJSON()),d.a.error("Unable to send feedback.")}})()},children:"Send"})]})]}),t.approved?t.expired?Object(q.jsx)("div",{className:"card-footer pb-5",children:Object(q.jsx)("span",{className:"btn btn-danger btn-sm font-weight-bold",children:"This request has expired. Please request this document again."})}):Object(q.jsx)("div",{className:"card-footer",children:t.file?Object(q.jsx)("a",{href:"".concat(t.file.url,"&download=true"),className:"btn btn-success btn-sm",target:"_blank",rel:"noreferrer",children:"Download Document"}):Object(q.jsx)("span",{children:"The request is approved but there is no attached document yet."})}):null]}):Object(q.jsx)("div",{className:"d-flex h-100 w-100",children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-2x"})})})})]}),Object(q.jsx)("div",{className:"modal fade",id:"deleteRequestModal",tabIndex:-1,role:"dialog","aria-labelledby":"deleteRequestModalLabel","aria-hidden":"true",children:Object(q.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(q.jsxs)("div",{className:"modal-content",children:[Object(q.jsxs)("div",{className:"modal-header",children:[Object(q.jsx)("h5",{className:"modal-title",id:"deleteRequestModalLabel",children:"Delete Request"}),Object(q.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(q.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(q.jsx)("div",{className:"modal-body",children:"Are you sure you want to delete this request?"}),Object(q.jsxs)("div",{className:"modal-footer",children:[Object(q.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),$("#deleteRequestModal").modal("hide"),(async()=>{if(!j){j=!0;try{await P.a.delete("/requests?id=".concat(null===t||void 0===t?void 0:t.id)),d.a.success("Request deleted successfully."),c.goBack()}catch(e){g(e)}finally{j=!1}}})()},children:"Confirm"}),Object(q.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Cancel"})]})]})})}),Object(q.jsx)("iframe",{title:"Print Page",id:"iframe",className:"d-none"})]})}function Ne(){const e=Object(r.h)(),t=t=>"".concat(e.path).concat(t);return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:t("/"),exact:!0,component:ge}),Object(q.jsx)(r.a,{path:t("/add"),component:fe}),Object(q.jsx)(r.a,{path:t("/:id"),component:ve})]})}function ye(){const e=Object(r.h)();return Object(q.jsx)(r.c,{children:Object(q.jsx)(r.a,{path:(t=S.REQUESTS.ROOT,"".concat(e.path).concat(t)),component:Ne})});var t}function we(){const e=Object(r.h)(),t=[{url:S.DASHBOARD,icon:"nc-icon nc-bank",title:"Dashboard"},{url:(a=S.REQUESTS.ROOT,"".concat(e.path).concat(a)),icon:"nc-icon nc-tag-content",title:"Requests"}];var a;return Object(q.jsx)("div",{className:"sidebar-wrapper",style:{overflowX:"hidden"},children:Object(q.jsx)("ul",{className:"nav",children:t.map(((e,t)=>Object(q.jsx)("li",{className:O(e.url===window.location.pathname,"active"),children:Object(q.jsxs)(i.b,{to:e.url,children:[Object(q.jsx)("i",{className:e.icon}),Object(q.jsx)("p",{children:e.title})]})},t)))})})}function ke(){const e=Object(r.f)(),t=Object(r.h)();if(!D.has("logged")&&!D.get("logged")||void 0===D.get("user"))return e.push(S.LOGIN),null;const a=D.get("user");return Object(q.jsxs)("div",{className:"wrapper bg-yellow",children:[Object(q.jsxs)("div",{className:"sidebar bg-maroon","data-color":"white","data-active-color":"danger",children:[Object(q.jsxs)("div",{className:"logo bg-maroon",children:[Object(q.jsx)(i.b,{to:S.DASHBOARD,className:"simple-text logo-mini",children:Object(q.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"rounded-circle"})}),Object(q.jsx)(i.b,{to:S.DASHBOARD,className:"logo-normal text-warning bg-maroon",children:Object(q.jsx)("h5",{children:"PUPBBDMS"})})]}),"Admin"===a.role?Object(q.jsx)(me,{}):null,k(a.role,["Processing","Cashier","Evaluation","Signing","Releasing","Director","Registrar"])?Object(q.jsx)(he,{}):null,"Applicant"===a.role?Object(q.jsx)(we,{}):null]}),Object(q.jsxs)("div",{className:"main-panel h-100 bg-yellow",children:[Object(q.jsx)(xe,{}),Object(q.jsxs)("div",{className:"content bg-yellow",children:[Object(q.jsx)(r.a,{path:(s=S.PROFILE,"".concat(t.path).concat(s)),exact:!0,component:pe}),"Admin"===a.role?Object(q.jsx)(be,{}):null,k(a.role,["Processing","Cashier","Evaluation","Signing","Releasing","Director","Registrar"])?Object(q.jsx)(ue,{}):null,"Applicant"===a.role?Object(q.jsx)(ye,{}):null]}),Object(q.jsx)(Oe,{})]})]});var s}function Se(e){const t=(t,a)=>{const s=e.cms.find((e=>e.key===t));return s?s.value:a};return Object(q.jsx)("div",{className:"section section-dark text-center",children:Object(q.jsxs)("div",{className:"container",children:[Object(q.jsx)("h2",{className:"title",children:t("about-us-title","Let's talk about us")}),Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-profile card-plain",children:[Object(q.jsx)("div",{className:"card-avatar",children:Object(q.jsx)("a",{href:"#avatar",children:Object(q.jsx)("img",{src:t("about-us-profile-1-picture","/assets/img/prof.png"),alt:"..."})})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("a",{href:"#paper-kit",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("h4",{className:"card-title",children:t("about-us-profile-1-name","Staff")}),Object(q.jsx)("h6",{className:"card-category",children:t("about-us-profile-1-position","Staff Position")})]})}),Object(q.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-1-description","Description")})]})]})}),Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-profile card-plain",children:[Object(q.jsx)("div",{className:"card-avatar",children:Object(q.jsx)("a",{href:"#avatar",children:Object(q.jsx)("img",{src:t("about-us-profile-2-picture","/assets/img/prof.png"),alt:"..."})})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("a",{href:"#paper-kit",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("h4",{className:"card-title",children:t("about-us-profile-2-name","Staff")}),Object(q.jsx)("h6",{className:"card-category",children:t("about-us-profile-2-position","Staff Position")})]})}),Object(q.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-2-description","Description")})]})]})}),Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-profile card-plain",children:[Object(q.jsx)("div",{className:"card-avatar",children:Object(q.jsx)("a",{href:"#avatar",children:Object(q.jsx)("img",{src:t("about-us-profile-3-picture","/assets/img/prof.png"),alt:"..."})})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("a",{href:"#paper-kit",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("h4",{className:"card-title",children:t("about-us-profile-3-name","Staff")}),Object(q.jsx)("h6",{className:"card-category",children:t("about-us-profile-3-position","Staff Position")})]})}),Object(q.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-3-description","Descrption")})]})]})}),Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-profile card-plain",children:[Object(q.jsx)("div",{className:"card-avatar",children:Object(q.jsx)("a",{href:"#avatar",children:Object(q.jsx)("img",{src:t("about-us-profile-4-picture","/assets/img/prof.png"),alt:"..."})})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("a",{href:"#paper-kit",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("h4",{className:"card-title",children:t("about-us-profile-4-name","Staff")}),Object(q.jsx)("h6",{className:"card-category",children:t("about-us-profile-4-position","Staff Position")})]})}),Object(q.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-4-description","Description")})]})]})}),Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-profile card-plain",children:[Object(q.jsx)("div",{className:"card-avatar",children:Object(q.jsx)("a",{href:"#avatar",children:Object(q.jsx)("img",{src:t("about-us-profile-5-picture","/assets/img/prof.png"),alt:"..."})})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("a",{href:"#paper-kit",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("h4",{className:"card-title",children:t("about-us-profile-5-name","Staff")}),Object(q.jsx)("h6",{className:"card-category",children:t("about-us-profile-5-position","Staff Position")})]})}),Object(q.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-5-description","Description")})]})]})}),Object(q.jsx)("div",{className:"col-md-4",children:Object(q.jsxs)("div",{className:"card card-profile card-plain",children:[Object(q.jsx)("div",{className:"card-avatar",children:Object(q.jsx)("a",{href:"#avatar",children:Object(q.jsx)("img",{src:t("about-us-profile-6-picture","/assets/img/prof.png"),alt:"..."})})}),Object(q.jsxs)("div",{className:"card-body",children:[Object(q.jsx)("a",{href:"#paper-kit",children:Object(q.jsxs)("div",{className:"author",children:[Object(q.jsx)("h4",{className:"card-title",children:t("about-us-profile-6-name","Staff")}),Object(q.jsx)("h6",{className:"card-category",children:t("about-us-profile-6-position","Staff Position")})]})}),Object(q.jsx)("p",{className:"card-description text-center",children:t("about-us-profile-6-description","Description")})]})]})})]})]})})}u.a.extend(p.a),u.a.extend(p.a),u.a.extend(p.a),u.a.extend(p.a);var Re=e=>{const t=Math.random().toString(36).substring(2,15);return Object(q.jsx)("div",{className:"container mb-4",children:Object(q.jsxs)("div",{id:t,className:"carousel slide","data-ride":"carousel",children:[Object(q.jsxs)("div",{className:"carousel-inner",children:[Object(q.jsx)("div",{className:"carousel-item active",children:Object(q.jsx)("img",{className:"d-block w-100",src:"/assets/img/login1.png",alt:"First slide"})}),Object(q.jsx)("div",{className:"carousel-item",children:Object(q.jsx)("img",{className:"d-block w-100",src:"/assets/img/login2.png",alt:"Second slide"})}),Object(q.jsx)("div",{className:"carousel-item",children:Object(q.jsx)("img",{className:"d-block w-100",src:"/assets/img/login3.png",alt:"Third slide"})}),Object(q.jsx)("div",{className:"carousel-item",children:Object(q.jsx)("img",{className:"d-block w-100",src:"/assets/img/login4.png",alt:"Fourth slide"})}),Object(q.jsx)("div",{className:"carousel-item",children:Object(q.jsx)("img",{className:"d-block w-100",src:"/assets/img/login5.png",alt:"Fifth slide"})})]}),Object(q.jsxs)("a",{className:"carousel-control-prev",href:"#".concat(t),role:"button","data-slide":"prev",children:[Object(q.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(q.jsx)("span",{className:"sr-only",children:"Previous"})]}),Object(q.jsxs)("a",{className:"carousel-control-next",href:"#".concat(t),role:"button","data-slide":"next",children:[Object(q.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(q.jsx)("span",{className:"sr-only",children:"Next"})]})]})})};function De(){const[e,t]=Object(s.useState)({name:"",email:"",message:""}),[a,c]=Object(s.useState)(!1);return Object(q.jsx)("div",{className:"section landing-section",children:Object(q.jsxs)("div",{className:"container",children:[Object(q.jsx)("div",{className:"row",children:Object(q.jsxs)("div",{className:"col-md-8 ml-auto mr-auto",children:[Object(q.jsx)("h2",{className:"text-center",children:"Keep in touch?"}),Object(q.jsxs)("form",{className:"contact-form",onSubmit:a=>{a.preventDefault(),(async()=>{c(!0);try{await P.a.post("/contacts",e),t({name:"",email:"",message:""}),d.a.info("Message has been sent.","Notice")}catch(a){console.log(a.toJSON()),d.a.error("Unable to send message","Oops!")}finally{c(!1)}})()},children:[Object(q.jsxs)("div",{className:"row",children:[Object(q.jsxs)("div",{className:"col-md-6",children:[Object(q.jsx)("label",{children:"Name"}),Object(q.jsxs)("div",{className:"input-group",children:[Object(q.jsx)("div",{className:"input-group-prepend",children:Object(q.jsx)("span",{className:"input-group-text",children:Object(q.jsx)("i",{className:"nc-icon nc-single-02"})})}),Object(q.jsx)("input",{type:"text",className:"form-control ".concat(O(a,"disabled")),disabled:a,onChange:a=>{t({...e,name:a.target.value})},placeholder:"Name"})]})]}),Object(q.jsxs)("div",{className:"col-md-6",children:[Object(q.jsx)("label",{children:"Email"}),Object(q.jsxs)("div",{className:"input-group",children:[Object(q.jsx)("div",{className:"input-group-prepend",children:Object(q.jsx)("span",{className:"input-group-text",children:Object(q.jsx)("i",{className:"nc-icon nc-email-85"})})}),Object(q.jsx)("input",{type:"email",className:"form-control ".concat(O(a,"disabled")),disabled:a,onChange:a=>{t({...e,email:a.target.value})},placeholder:"Email"})]})]})]}),Object(q.jsx)("label",{children:"Message"}),Object(q.jsx)("textarea",{className:"form-control ".concat(O(a,"disabled")),disabled:a,onChange:a=>{t({...e,message:a.target.value})},rows:4,placeholder:"Tell us your thoughts and feelings..."}),Object(q.jsx)("div",{className:"row",children:Object(q.jsx)("div",{className:"col-md-4 ml-auto mr-auto text-center",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-danger btn-lg btn-fill ".concat(O(a,"disabled")),disabled:a,children:a?"Sending":"Send Message"})})})]})]})}),Object(q.jsxs)("div",{className:"row",children:[Object(q.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 pt-5 text-center",children:[Object(q.jsx)("a",{href:"/",onClick:e=>e.preventDefault(),children:Object(q.jsx)("i",{className:"fab fa-facebook fa-2x mx-2"})}),Object(q.jsx)("a",{href:"/",onClick:e=>e.preventDefault(),children:Object(q.jsx)("i",{className:"fab fa-twitter fa-2x mx-2"})}),Object(q.jsx)("a",{href:"/",onClick:e=>e.preventDefault(),children:Object(q.jsx)("i",{className:"fab fa-youtube fa-2x mx-2"})}),Object(q.jsx)("a",{href:"/",onClick:e=>e.preventDefault(),children:Object(q.jsx)("i",{className:"fab fa-linkedin fa-2x mx-2"})})]}),Object(q.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 pt-5",children:[Object(q.jsx)("h6",{children:"Contact Us"}),Object(q.jsxs)("div",{className:"row",children:[Object(q.jsx)("div",{className:"col-3",children:Object(q.jsx)("b",{children:"PHONE"})}),Object(q.jsx)("div",{className:"col-9",children:"091234567890"}),Object(q.jsx)("div",{className:"col-3",children:Object(q.jsx)("b",{children:"EMAIL"})}),Object(q.jsx)("div",{className:"col-9",children:"email@pup.com"})]})]})]})]})})}function Ce(e){const t=(t,a)=>{const s=e.cms.find((e=>e.key===t));return s?s.value:a};return Object(q.jsx)("div",{className:"section text-center",children:Object(q.jsxs)("div",{className:"container",children:[Object(q.jsx)("div",{className:"row",children:Object(q.jsxs)("div",{className:"col-md-8 ml-auto mr-auto",children:[Object(q.jsx)("h2",{className:"title",children:t("description-title","")}),Object(q.jsx)("h5",{className:"description text-dark",children:t("description-paragraph","")})]})}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsxs)("div",{className:"row text-dark",children:[Object(q.jsx)("div",{className:"col-md-3",children:Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("div",{className:"icon icon-danger",children:Object(q.jsx)("i",{className:""})}),Object(q.jsxs)("div",{className:"description",children:[Object(q.jsx)("h4",{className:"info-title",children:t("description-card-1-title","Beautiful Gallery")}),Object(q.jsx)("p",{className:"description",children:t("description-card-1-description","Spend your time generating new ideas. You don't have to think of implementing.")})]})]})}),Object(q.jsx)("div",{className:"col-md-3",children:Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("div",{className:"icon icon-danger",children:Object(q.jsx)("i",{className:""})}),Object(q.jsxs)("div",{className:"description",children:[Object(q.jsx)("h4",{className:"info-title",children:t("description-card-2-title","New Ideas")}),Object(q.jsx)("p",{children:t("description-card-2-description","Larger, yet dramatically thinner. More powerful, but remarkably power efficient.")})]})]})}),Object(q.jsx)("div",{className:"col-md-3",children:Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("div",{className:"icon icon-danger",children:Object(q.jsx)("i",{className:""})}),Object(q.jsxs)("div",{className:"description",children:[Object(q.jsx)("h4",{className:"info-title",children:t("description-card-3-title","Statistics")}),Object(q.jsx)("p",{children:t("description-card-3-description","Choose from a veriety of many colors resembling sugar paper pastels.")})]})]})}),Object(q.jsx)("div",{className:"col-md-3",children:Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("div",{className:"icon icon-danger",children:Object(q.jsx)("i",{className:""})}),Object(q.jsxs)("div",{className:"description",children:[Object(q.jsx)("h4",{className:"info-title",children:t("description-card-4-title","Delightful design")}),Object(q.jsxs)("p",{children:[t("description-card-4-description","Find unique and handmade delightful designs related items directly from our sellers"),"."]})]})]})})]})]})})}var Ee=e=>{let{answer:t}=e;const[a,c]=Object(s.useState)(!1);return Object(q.jsxs)("div",{className:"card-body",children:[a?Object(q.jsx)("p",{className:"card-text",style:{textAlign:"justify"},children:t}):null,Object(q.jsx)("a",{href:"/",className:"text-info font-weight-bold",onClick:e=>{e.preventDefault(),c(!a)},children:a?"Hide":"Show"})]})};function Ae(e){const t=JSON.parse(((t,a)=>{const s=e.cms.find((e=>e.key===t));return s?s.value:a})("faqs",JSON.stringify([]))),a=[[]];return t.forEach((e=>{const t=a[a.length-1];t.length<2?(t.push(e),a.splice(a.length-1,1,t)):a.push([e])})),Object(q.jsx)("div",{className:"section landing-section",children:Object(q.jsx)("div",{className:"container",children:Object(q.jsx)("div",{className:"row",children:Object(q.jsxs)("div",{className:"col-md-8 mx-auto justify-content-center",children:[Object(q.jsx)("h2",{className:"col-md-8 ml-auto mr-auto text-center justify-content-center",children:Object(q.jsx)("b",{children:"FAQs"})}),a.map(((e,t)=>Object(q.jsx)("div",{className:"card-group",children:e.map(((e,t)=>Object(q.jsxs)("div",{className:"card m-1 border-0 shadow rounded",children:[Object(q.jsx)("div",{className:"card-header d-flex",children:Object(q.jsx)("h3",{className:"card-title mb-0 align-self-center",style:{color:"#000"},children:Object(q.jsx)("b",{children:e.question})})}),Object(q.jsx)(Ee,{answer:e.answer})]},t)))},t)))]})})})})}function _e(e){const t=Object(r.f)(),a="true"===new URLSearchParams(t.location.search).get("preview"),s=(t,a)=>{const s=e.cms.find((e=>e.key===t));return s?s.value:a};return Object(q.jsxs)("div",{className:"page-header",style:{backgroundImage:"url(".concat(s("header-picture","/assets/img/pup.jpg"),")"),backgroundPosition:"50%",backgroundSize:"cover",minHeight:"100vh",maxHeight:"999px",overflow:"hidden",position:"relative",width:"100%",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(q.jsx)("div",{className:"filter"}),Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)("div",{className:"text-center",style:{color:"#fff",zIndex:3,position:"relative"},children:[Object(q.jsx)("h1",{children:s("header-title","Welcome to PBBDTM")}),Object(q.jsx)("h3",{children:s("header-description","PUP Bansud Branch Documents Monitoring System")}),Object(q.jsx)("br",{}),a?Object(q.jsxs)("a",{href:S.REGISTER,className:"btn btn-outline-neutral btn-round",onClick:e=>e.preventDefault(),children:[Object(q.jsx)("i",{className:"fa fa-play"})," Get Started"]}):Object(q.jsxs)(i.b,{to:S.REGISTER,className:"btn btn-outline-neutral btn-round",children:[Object(q.jsx)("i",{className:"fa fa-play"})," Get Started"]})]})})]})}function qe(){const e=Object(r.f)(),t=()=>D.get("logged")&&D.get("user"),a="true"===new URLSearchParams(e.location.search).get("preview");return Object(q.jsx)("nav",{className:"navbar navbar-expand-lg fixed-top navbar-transparent border-0","color-on-scroll":"300",children:Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)("div",{className:"navbar-translate",children:[Object(q.jsx)(i.b,{className:"navbar-brand",to:"/",title:"PBBDTM","data-placement":"bottom",children:"PBBDMS"}),Object(q.jsxs)("button",{className:"navbar-toggler navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navigation","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation",children:[Object(q.jsx)("span",{className:"navbar-toggler-bar bar1"}),Object(q.jsx)("span",{className:"navbar-toggler-bar bar2"}),Object(q.jsx)("span",{className:"navbar-toggler-bar bar3"})]})]}),a?Object(q.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(q.jsxs)("ul",{className:"navbar-nav",children:[Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)("a",{href:S.TRACK_REQUEST,className:"nav-link",onClick:e=>e.preventDefault(),children:[Object(q.jsx)("i",{className:"nc-icon nc-bag-16 mr-1"}),"Track Request"]})}),t()?Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)("a",{href:S.DASHBOARD,className:"nav-link",onClick:e=>e.preventDefault(),children:[Object(q.jsx)("i",{className:"nc-icon nc-bank mr-1"}),"Dashboard"]})}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)("a",{href:S.LOGIN,className:"nav-link",onClick:e=>e.preventDefault(),children:[Object(q.jsx)("i",{className:"nc-icon nc-layout-11 mr-1"}),"Login"]})}),Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)("a",{href:S.REGISTER,className:"nav-link",onClick:e=>e.preventDefault(),children:[Object(q.jsx)("i",{className:"nc-icon nc-book-bookmark mr-1"}),"Register"]})})]})]})}):Object(q.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(q.jsxs)("ul",{className:"navbar-nav",children:[Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)(i.b,{to:S.TRACK_REQUEST,className:"nav-link",children:[Object(q.jsx)("i",{className:"nc-icon nc-bag-16 mr-1"}),"Track Request"]})}),t()?Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)(i.b,{to:S.DASHBOARD,className:"nav-link",children:[Object(q.jsx)("i",{className:"nc-icon nc-bank mr-1"}),"Dashboard"]})}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)(i.b,{to:S.LOGIN,className:"nav-link",children:[Object(q.jsx)("i",{className:"nc-icon nc-layout-11 mr-1"}),"Login"]})}),Object(q.jsx)("li",{className:"nav-item",children:Object(q.jsxs)(i.b,{to:S.REGISTER,className:"nav-link",children:[Object(q.jsx)("i",{className:"nc-icon nc-book-bookmark mr-1"}),"Register"]})})]})]})})]})})}function Te(){const[e,t]=Object(s.useState)(!1),[a,c]=Object(s.useState)([]);return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await P.a.get("/cms");c([...e])}catch(e){console.log(e.toJSON())}finally{t(!0)}})(),$("body").css("background-color","#fff");const e=$("#dashboard-styles").attr("href");return $("head").append('<link rel="stylesheet" href="https://demos.creative-tim.com/paper-kit-2/assets/css/paper-kit.min.css?v=2.2.0" id="landing-styles" />'),$("head").append('<script src="https://demos.creative-tim.com/paper-kit-2/assets/js/paper-kit.min.js?v=2.2.0" id="landing-script"><\/script>'),()=>{$("body").css("background-color","#f4f3ef"),$("#landing-styles").remove(),$("#landing-script").remove(),$("head").append('<link rel="stylesheet" href="'.concat(e,'" />'))}}),[]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"pb-5 ".concat(O(!e,"d-none")),children:[Object(q.jsx)(qe,{}),Object(q.jsx)(_e,{cms:a}),Object(q.jsx)(Ce,{cms:a}),Object(q.jsx)(Re,{}),Object(q.jsx)(Se,{cms:a}),Object(q.jsx)(De,{}),Object(q.jsx)(Ae,{cms:a}),Object(q.jsxs)("div",{className:"container",children:[Object(q.jsx)("h3",{className:"text-center mb-4",children:"Current Statistics"}),Object(q.jsx)(ie,{})]})]}),e?null:Object(q.jsx)("div",{className:"h-100vh d-flex align-items-center justify-content-center",children:Object(q.jsx)("div",{className:"container-fluid text-center",children:Object(q.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid rounded-circle",style:{height:"200px",width:"200px"}})})})]})}var Me=a(11),Pe=a.n(Me);function Ue(){const[e,t]=Object(s.useState)({email:"",password:""}),[a,c]=Object(s.useState)(!1),n=Object(r.f)();D.has("logged")&&D.get("logged")&&D.get("user")&&n.push(S.DASHBOARD);return Object(q.jsx)("div",{className:"w-100 h-100vh d-flex bg-vgrad ".concat(Pe.a.body),children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsxs)("div",{className:"card shadow ".concat(Pe.a.card),children:[Object(q.jsxs)("div",{className:"card-header text-center",children:[Object(q.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid hw-max-75 rounded-circle clickable",onClick:e=>{e.preventDefault(),n.push(S.ROOT)}}),Object(q.jsx)("h2",{className:"card-title",children:Object(q.jsx)(i.b,{to:S.ROOT,style:{textDecoration:"none"},children:"PUP Bansud Branch"})}),Object(q.jsx)("p",{className:"card-text",children:"Documents Monitoring System"})]}),Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async()=>{if(0===e.password.length)return d.a.error("Please provide a password.");if(D.has("block")){const e=u()(),t=u()(D.get("block"));if(t.isValid()&&!e.isAfter(t))return d.a.error("Maximum login attempts exceeded. Please wait for ".concat(t.fromNow()," then try again."),"Oops!");D.remove("block").remove("attempts")}c(!0);try{const t=await P.a.post("/auth/login",e),{user:a,token:s}=t.data;D.set("logged",!0),D.set("user",a),D.set("token",s),D.remove("block").remove("attempts"),n.push(S.DASHBOARD)}catch(t){g(t),console.log(t);const e=(D.has("attempts")?D.get("attempts"):0)+1;e>=3?(D.set("block",u()().add(1,"minutes").toJSON()),d.a.error("Login blocked. Please try again later.")):(D.set("attempts",e),d.a.error("Login attempts: ".concat(e)))}finally{c(!1)}})()},children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(q.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"email@dtms.com",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.email,onChange:a=>{e.email=a.target.value,t({...e})}})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(q.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.password,onChange:a=>{e.password=a.target.value,t({...e})}})]}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary ".concat(O(a,"disabled")),disabled:a,children:a?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Login"})}),Object(q.jsxs)("div",{className:"form-group d-flex",children:[Object(q.jsxs)("div",{className:"mr-auto",children:["Don't have an account?"," ",Object(q.jsx)(i.b,{to:S.REGISTER,className:"d-inline",children:"Register"})]}),Object(q.jsx)("div",{className:"ml-auto",children:Object(q.jsx)(i.b,{to:S.FORGOT_PASSWORD,children:"Forgot Password"})})]})]})})]})})})}var Fe=a(85),Ie=a.n(Fe);function Be(){const[e,t]=Object(s.useState)({name:"",email:"",phone:"09",password:"",password_confirmation:"",type:"Client",student_id_number:""}),[a,c]=Object(s.useState)(!1),n=(l=t,o=e=>({...e}),e=>l(o(e)));var l,o;const j=Object(r.f)();D.has("logged")&&D.get("logged")&&j.push(S.DASHBOARD);return Object(q.jsx)("div",{className:"w-100 h-100vh d-flex ".concat(Pe.a.body),children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsxs)("div",{className:"card shadow ".concat(Pe.a.card),children:[Object(q.jsxs)("div",{className:"card-header text-center",children:[Object(q.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid hw-max-75 rounded-circle clickable",onClick:e=>{e.preventDefault(),j.push(S.ROOT)}}),Object(q.jsx)("h2",{className:"card-title",children:Object(q.jsx)(i.b,{to:S.ROOT,style:{textDecoration:"none"},children:"PUP Bansud Branch"})}),Object(q.jsx)("p",{className:"card-text",children:"Documents Monitoring System"})]}),Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async()=>{if(0===e.name.length)return d.a.error("Please provide a name.");if(0===e.password.length)return d.a.error("Please provide a password.");if(e.password!==e.password_confirmation)return d.a.error("Password and Confirm Password does not match.","Oops!");if("Student"===e.type){if(!/\d{4}-\d{5}-[A-Z]{2}-\d{1}/g.test(e.student_id_number))return d.a.error("Student ID Number is not in correct format.");const t=e.student_id_number.split("-")[0];if(Number(t)>=(new Date).getUTCFullYear())return d.a.error("Student ID Number is invalid.")}c(!0);try{const t=await P.a.post("/auth/register",e),{user:a,token:s}=t.data;D.set("logged",!0),D.set("user",a),D.set("token",s),j.push(S.DASHBOARD)}catch(t){g(t),console.log(t)}finally{c(!1)}})()},children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"name",children:"Name"}),Object(q.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"John Smith",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.name,onChange:t=>{e.name=t.target.value,n(e)}})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(q.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"email@dtms.com",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.email,onChange:t=>{e.email=t.target.value,n(e)}})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(q.jsx)(Ie.a,{mask:"0\\9999999999",type:"text",name:"phone",id:"phone",placeholder:"639123456789",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.phone,onChange:t=>{e.phone=t.target.value,n(e)}})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(q.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.password,onChange:t=>{e.password=t.target.value,n(e)}})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"password_confirmation",children:"Confirm Password"}),Object(q.jsx)("input",{type:"password",name:"password_confirmation",id:"password_confirmation",placeholder:"Password",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.password_confirmation,onChange:t=>{e.password_confirmation=t.target.value,n(e)}})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"Type",children:"Type"}),Object(q.jsxs)("select",{name:"type",id:"type",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.type,onChange:t=>{e.type=t.target.value,n(e)},children:[Object(q.jsx)("option",{value:"Client",children:"Client"}),Object(q.jsx)("option",{value:"Student",children:"Student"})]})]}),"Student"===e.type?Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"student_id_number",children:"Student ID Number:"}),Object(q.jsx)("input",{type:"text",name:"student_id_number",id:"student_id_number",placeholder:"Student ID Number",className:"form-control form-control-sm ".concat(O(a,"disabled")),disabled:a,value:e.student_id_number,onChange:t=>{e.student_id_number=t.target.value,n(e)}}),Object(q.jsx)("small",{className:"form-text text-muted",children:"Ex: 2020-00001-BS-0"})]}):null,Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary ".concat(O(a,"disabled")),disabled:a,children:a?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Register"})}),Object(q.jsxs)("div",{className:"form-group",children:["Already have an account?"," ",Object(q.jsx)(i.b,{to:S.LOGIN,className:"d-inline",children:"Login"})]})]})})]})})})}a(79);var Le=e=>(Object(s.useEffect)((()=>{$("body").css("background-color","#fff");const e=$("#dashboard-styles").attr("href");return $("#dashboard-styles").remove(),$("head").append('<link rel="stylesheet" href="https://demos.creative-tim.com/paper-kit-2/assets/css/paper-kit.min.css?v=2.2.0" id="landing-styles" />'),$("head").append('<script src="https://demos.creative-tim.com/paper-kit-2/assets/js/paper-kit.min.js?v=2.2.0" id="landing-script"><\/script>'),()=>{$("body").css("background-color","#f4f3ef"),$("#landing-styles").remove(),$("#landing-script").remove(),$("head").append('<link rel="stylesheet" href="'.concat(e,'" />'))}}),[]),Object(q.jsxs)("div",{className:"pb-5",children:[Object(q.jsx)(qe,{}),Object(q.jsxs)("div",{className:"page-header",style:{backgroundImage:"url(/assets/img/pup.jpg)",backgroundPosition:"50%",backgroundSize:"cover",minHeight:"100vh",maxHeight:"999px",overflow:"hidden",position:"relative",width:"100%",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(q.jsx)("div",{className:"filter"}),Object(q.jsx)("div",{className:"container d-flex",children:Object(q.jsx)(U,{className:"d-inline mx-auto"})})]})]}));var Ye=e=>{const[t,a]=Object(s.useState)({email:""}),[c,n]=Object(s.useState)(!1),l=Object(r.f)();D.has("logged")&&D.get("logged")&&D.get("user")&&l.push(S.DASHBOARD);return Object(q.jsx)("div",{className:"w-100 h-100vh d-flex bg-vgrad ".concat(Pe.a.body),children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsxs)("div",{className:"card shadow ".concat(Pe.a.card),children:[Object(q.jsxs)("div",{className:"card-header text-center",children:[Object(q.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid hw-max-75 rounded-circle clickable",onClick:e=>{e.preventDefault(),l.push(S.ROOT)}}),Object(q.jsx)("h2",{className:"card-title",children:Object(q.jsx)(i.b,{to:S.ROOT,style:{textDecoration:"none"},children:"PUP Bansud Branch"})}),Object(q.jsx)("p",{className:"card-text",children:"Documents Monitoring System"})]}),Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(0===t.email.length)return d.a.error("Please provide a email.");n(!0);try{await P.a.post("/auth/forgot-password",t),d.a.success("Email sent successfully. Please check your inbox."),l.push(S.ROOT)}catch(e){g(e),console.log(e)}finally{n(!1)}})()},children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"email",children:"Email"}),Object(q.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"email@dtms.com",className:"form-control form-control-sm ".concat(O(c,"disabled")),disabled:c,value:t.email,onChange:e=>{t.email=e.target.value,a({...t})}})]}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary ".concat(O(c,"disabled")),disabled:c,children:c?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Submit"})})]})})]})})})};var Je=e=>{const[t,a]=Object(s.useState)({password:"",token:Object(r.g)().token}),[c,n]=Object(s.useState)(!1),l=Object(r.f)();D.has("logged")&&D.get("logged")&&D.get("user")&&l.push(S.DASHBOARD);return Object(q.jsx)("div",{className:"w-100 h-100vh d-flex bg-vgrad ".concat(Pe.a.body),children:Object(q.jsx)("div",{className:"align-self-center mx-auto",children:Object(q.jsxs)("div",{className:"card shadow ".concat(Pe.a.card),children:[Object(q.jsxs)("div",{className:"card-header text-center",children:[Object(q.jsx)("img",{src:"/assets/manifest-icon-512.png",alt:"Logo",className:"img-fluid hw-max-75 rounded-circle clickable",onClick:e=>{e.preventDefault(),l.push(S.ROOT)}}),Object(q.jsx)("h2",{className:"card-title",children:Object(q.jsx)(i.b,{to:S.ROOT,style:{textDecoration:"none"},children:"PUP Bansud Branch"})}),Object(q.jsx)("p",{className:"card-text",children:"Documents Monitoring System"})]}),Object(q.jsx)("div",{className:"card-body",children:Object(q.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(0===t.password.length)return d.a.error("Please provide a password.");n(!0);try{await P.a.post("/auth/reset-password",t),d.a.success("Password changed successfully."),l.push(S.LOGIN)}catch(e){g(e),console.log(e)}finally{n(!1)}})()},children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{htmlFor:"email",children:"New Password"}),Object(q.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"New Password",className:"form-control form-control-sm ".concat(O(c,"disabled")),disabled:c,value:t.password,onChange:e=>{t.password=e.target.value,a({...t})}})]}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary ".concat(O(c,"disabled")),disabled:c,children:c?Object(q.jsx)("div",{className:"spin",children:Object(q.jsx)("i",{className:"bi bi-arrow-clockwise"})}):"Submit"})})]})})]})})})};function He(){return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await P.a.get("/self");D.set("logged",!0),D.set("user",e)}catch(e){console.log(e.toJSON()),D.remove("user").set("logged",!1)}})()}),[]),Object(q.jsx)(i.a,{children:Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:S.ROOT,exact:!0,component:Te}),Object(q.jsx)(r.a,{path:S.LOGIN,component:Ue}),Object(q.jsx)(r.a,{path:S.REGISTER,component:Be}),Object(q.jsx)(r.a,{path:S.DASHBOARD,component:ke}),Object(q.jsx)(r.a,{path:S.TRACK_REQUEST,exact:!0,component:Le}),Object(q.jsx)(r.a,{path:"".concat(S.TRACK_REQUEST,"/:id"),component:ve}),Object(q.jsx)(r.a,{path:S.FORGOT_PASSWORD,component:Ye}),Object(q.jsx)(r.a,{path:"".concat(S.RESET_PASSWORD,"/:token"),component:Je})]})})}var Ve=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,226)).then((t=>{let{getCLS:a,getFID:s,getFCP:c,getLCP:n,getTTFB:l}=t;a(e),s(e),c(e),n(e),l(e)}))};a(224);Error.prototype.toJSON=function(){const e={},t=this;return Object.getOwnPropertyNames(t).forEach((function(a){e[a]=t[a]}),t),"stack"in e&&(e.stack=e.stack.split(/\r?\n/).map((e=>e.trim())).filter(((e,t)=>0!==t))),e},String.prototype.parseNumbers=function(){const e=this.split(".");if(e.length>1){const t=(e[0].match(/\d/g)||[]).join(""),a=(e[1].match(/\d/g)||[]).join("");return Number("".concat(t,".").concat(a))||0}const t=this.match(/\d/g);return t&&Number(t.join(""))||0},P.a.defaults.baseURL="http://localhost:8000/api",P.a.defaults.headers.common.Accept="application/json",D.has("token")&&(P.a.defaults.headers.common.Authorization="Bearer ".concat(D.get("token"))),D.listen("token",(e=>{P.a.defaults.headers.common.Authorization="Bearer ".concat(e)})),l.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(He,{})}),document.getElementById("root")),Ve()},90:function(e,t,a){},91:function(e,t,a){}},[[225,1,2]]]);
//# sourceMappingURL=main.9c75d8b6.chunk.js.map